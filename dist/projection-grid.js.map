{"version":3,"sources":["webpack/universalModuleDefinition","webpack/bootstrap e894cb96dbbd5feb4425","webpack-src:///projection-grid-example/js\\index.js","webpack-src:///projection-grid-example/js\\factory\\grid-factory.js","external \"underscore\"","webpack-src:///projection-grid-example/js\\factory\\renderers-plugin.js","webpack-src:///projection-grid-example/js\\layout\\index.js","webpack-src:///projection-grid-example/js\\layout\\table.js","external \"jquery\"","external \"backbone\"","webpack-src:///projection-grid-example/js\\layout\\template\\table.jade","webpack-src:///projection-grid-example/node_modules\\jade\\lib\\runtime.js","ignored D:\\src\\projection-grid\\node_modules\\jade\\lib fs","webpack-src:///projection-grid-example/js\\layout\\renderer\\index.js","webpack-src:///projection-grid-example/js\\layout\\renderer\\fixed-header.js","webpack-src:///projection-grid-example/js\\layout\\measure.js","webpack-src:///projection-grid-example/js\\layout\\px.js","webpack-src:///projection-grid-example/js\\layout\\renderer\\virtualization.js","webpack-src:///projection-grid-example/js\\factory\\projection-plugin.js","webpack-src:///projection-grid-example/js\\projection\\index.js","webpack-src:///projection-grid-example/js\\projection\\aggregate-row.js","webpack-src:///projection-grid-example/js\\projection\\base.js","webpack-src:///projection-grid-example/js\\model\\response.js","webpack-src:///projection-grid-example/js\\projection\\column-i18n.js","webpack-src:///projection-grid-example/js\\schema\\properties.js","webpack-src:///projection-grid-example/js\\projection\\column-queryable.js","webpack-src:///projection-grid-example/js\\projection\\column-shifter.js","webpack-src:///projection-grid-example/js\\projection\\column-template.js","webpack-src:///projection-grid-example/js\\projection\\editable-string.js","webpack-src:///projection-grid-example/js\\layout\\template\\row.editable.string.jade","webpack-src:///projection-grid-example/js\\projection\\editable.js","webpack-src:///projection-grid-example/js\\layout\\template\\editable.jade","webpack-src:///projection-grid-example/js\\popup-editor\\index.js","external \"bluebird\"","webpack-src:///projection-grid-example/js\\popup-editor\\index.jade","webpack:///./less/editable.less?c2b0","webpack-src:///projection-grid-example/less\\editable.less","webpack-src:///projection-grid-example/node_modules\\css-loader\\lib\\css-base.js","webpack-src:///projection-grid-example/node_modules\\style-loader\\addStyles.js","webpack-src:///projection-grid-example/js\\projection\\jsdata.js","webpack-src:///projection-grid-example/js\\projection\\map.js","webpack-src:///projection-grid-example/js\\projection\\memory-queryable.js","webpack-src:///projection-grid-example/js\\projection\\memory.js","webpack-src:///projection-grid-example/js\\projection\\mock.js","webpack-src:///projection-grid-example/js\\projection\\odata.js","webpack-src:///projection-grid-example/js\\projection\\page.js","webpack-src:///projection-grid-example/js\\projection\\property-template.js","webpack-src:///projection-grid-example/js\\projection\\row-checkbox.js","webpack-src:///projection-grid-example/js\\layout\\template\\selectable.jade","webpack-src:///projection-grid-example/js\\projection\\row-tri-state-checkbox.js","webpack-src:///projection-grid-example/js\\layout\\template\\row.tri-state-checked.jade","webpack-src:///projection-grid-example/js\\projection\\row-index.js","webpack-src:///projection-grid-example/js\\projection\\sink.js","webpack-src:///projection-grid-example/js\\projection\\column-group.js","webpack-src:///projection-grid-example/js\\projection\\columns.js","webpack-src:///projection-grid-example/js\\factory\\utility.js","webpack-src:///projection-grid-example/js\\factory\\grid-view-plugin.js","webpack-src:///projection-grid-example/js\\grid-view.js","webpack-src:///projection-grid-example/js\\model\\index.js","webpack-src:///projection-grid-example/js\\windowContainer.js","webpack-src:///projection-grid-example/js\\containerBase.js","webpack-src:///projection-grid-example/js\\elementContainer.js"],"names":[],"mappings":"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C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC;AACA;AACA,2CAA0C,oGAAoG,mDAAmD,IAAI;AACrM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,kCAAkC,gBAAgB;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,wCAAuC,SAAS;AAChD;;AAEA,gCAA+B;AAC/B,2CAA0C,4BAA4B;AACtE;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ,gCAA+B;AAC/B,2CAA0C,4BAA4B;AACtE;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;;AAEA;AACA,EAAC;;AAED,+BAA8B,suBAA8vB;AAC5xB,E;;;;;;ACnRA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,EAAE;AACb,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,EAAE;AACb,aAAY;AACZ;AACA;AACA;AACA;AACA,gFAA+E,iBAAiB,EAAE;AAClG;AACA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,gBAAgB;AAC3B,aAAY;AACZ;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,MAAK,SAAS;AACd,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,wEAAuE;AACvE,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY;AACZ;A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AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA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","file":"projection-grid.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"underscore\"), require(\"jquery\"), require(\"backbone\"), require(\"bluebird\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"underscore\", \"jquery\", \"backbone\", \"bluebird\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"projection-grid\"] = factory(require(\"underscore\"), require(\"jquery\"), require(\"backbone\"), require(\"bluebird\"));\n\telse\n\t\troot[\"projection-grid\"] = factory(root[\"underscore\"], root[\"jquery\"], root[\"backbone\"], root[\"bluebird\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_31__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e894cb96dbbd5feb4425\n **/","import factory from './factory/grid-factory';\r\n\r\nmodule.exports = {\r\n  GridView: require('./grid-view'),\r\n  projections: require('./projection/index'),\r\n  layout: require('./layout/index'),\r\n  factory,\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/index.js\n **/","import _ from 'underscore';\r\nimport renderersPlugin from './renderers-plugin';\r\nimport projectionPlugin from './projection-plugin';\r\nimport gridViewPlugin from './grid-view-plugin';\r\n\r\nconst configPlugin = definePlugin => definePlugin('config', [], function () {\r\n  return this.config;\r\n});\r\n\r\nclass GridFactory {\r\n  constructor() {\r\n    this.pluginIndex = {};\r\n    this.plugins = [];\r\n    this\r\n      .use(configPlugin)\r\n      .use(projectionPlugin)\r\n      .use(renderersPlugin)\r\n      .use(gridViewPlugin);\r\n  }\r\n\r\n  definePlugin(name, deps, callback) {\r\n    const plugin = { name, deps, callback };\r\n\r\n    this.pluginIndex[name] = plugin;\r\n    this.plugins.push(plugin);\r\n    _.each(deps, dep => {\r\n      if (!_.has(this.pluginIndex, dep)) {\r\n        throw new Error(`unresolved plugin dependency ${name} -> ${dep}`);\r\n      }\r\n    });\r\n  }\r\n\r\n  use(callback) {\r\n    callback(this.definePlugin.bind(this));\r\n    return this;\r\n  }\r\n\r\n  create(config) {\r\n    return _.reduce(\r\n      this.plugins,\r\n      (result, { name, deps, callback }) =>\r\n        _.extend(result, {\r\n          [name]: callback.apply(result, _.map(deps, dep => result[dep])),\r\n        }),\r\n      { config }\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default function () {\r\n  return new GridFactory();\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/factory/grid-factory.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 2\n ** module chunks = 0\n **/","import layout from '../layout/index';\r\n\r\nexport default definePlugin => definePlugin('renderers', [\r\n  'config',\r\n], function (config) {\r\n  const renderers = [];\r\n\r\n  if (config.scrollable) {\r\n    if (config.scrollable.virtual) {\r\n      renderers.push(layout.renderers.Virtualization);\r\n    }\r\n    if (config.scrollable.fixedHeader) {\r\n      renderers.push(layout.renderers.FixedHeader);\r\n    }\r\n  }\r\n\r\n  return renderers;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/factory/renderers-plugin.js\n **/","module.exports = {\r\n  TableLayout: require('./table'),\r\n  templates: {\r\n    table: require('./template/table.jade'),\r\n  },\r\n  renderers: require('./renderer/index'),\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/index.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/jquery',\r\n  'lib/backbone',\r\n], function (_, $, Backbone) {\r\n  var View = Backbone.View.extend({\r\n    events: {\r\n      'click th': 'thClick',\r\n      'click td': 'tdClick',\r\n      'change td>input.grid-text-input': 'editableStringChange',\r\n    },\r\n\r\n    initialize: function (options) {\r\n      _.bindAll(this, 'update', 'thClick', 'tdClick', 'dataFor');\r\n\r\n      this.options = _.extend(this.options, options);\r\n\r\n      // TODO [akamel] rename? this isn't a backbone data obj?\r\n      this.data = undefined;\r\n\r\n      this.container = options.container;\r\n      this.grid = options.grid;\r\n\r\n      this.renderers = _.map(this.options.renderers, function (Renderer) {\r\n        return new Renderer({ layout: this });\r\n      }.bind(this));\r\n\r\n      this.subviews = [];\r\n\r\n      // TODO [akamel] make this conditional if these renderes are enabled\r\n      this.onViewPortChange = this.onViewPortChange.bind(this);\r\n      this.listenTo(this.container, 'scroll:container', this.onViewPortChange);\r\n      this.listenTo(this.container, 'resize:container', this.onViewPortChange);\r\n    },\r\n\r\n    onViewPortChange: function () {\r\n      this.scheduleDraw();\r\n    },\r\n\r\n    removeSubviews: function () {\r\n      _.each(this.subviews, function (subview) {\r\n        subview.remove();\r\n      });\r\n      this.subviews = [];\r\n    },\r\n\r\n    remove: function () {\r\n      this.removeSubviews();\r\n      this.container.stopListening(this.container);\r\n      Backbone.View.prototype.remove.apply(this, arguments);\r\n    },\r\n\r\n    thClick: function (e) {\r\n      var arg = this.dataFor(e.currentTarget);\r\n\r\n      if (arg.column) {\r\n        this.trigger('click:header', e, arg);\r\n      }\r\n    },\r\n\r\n    tdClick: function (e) {\r\n      var arg = this.dataFor(e.currentTarget);\r\n\r\n      if (arg.column) {\r\n        this.trigger('click:cell', e, arg);\r\n      }\r\n    },\r\n\r\n    editableStringChange: function (e) {\r\n      var arg = this.dataFor(e.currentTarget);\r\n      var colEditableStr = this.grid.projection.get('column.editable.string');\r\n\r\n      if (arg.column) {\r\n        if (_.isObject(colEditableStr) && !_.isUndefined(colEditableStr[arg.property])) {\r\n          this.grid.projection.get('projection:column-editable-string').trigger('change:string', e, arg);\r\n        } else {\r\n          this.trigger('change:editable.string', e, arg);\r\n        }\r\n      }\r\n    },\r\n\r\n    dataFor: function (el) {\r\n      if (!$.contains(this.el, el)) {\r\n        return undefined;\r\n      }\r\n\r\n      var $el = $(el);\r\n      // TODO [akamel] can we use target instead?\r\n      var $tr = $el.closest('tr', this.el);\r\n      var $closestTD = $el.closest('td', this.el);\r\n      var $closestTH = $el.closest('th', this.el);\r\n      var $td = _.size($closestTD) ? $closestTD : $closestTH;\r\n      var virtualizer = this.getRenderer('virtualization');\r\n      var i = $tr.index() + (virtualizer ? virtualizer.first : 0);\r\n      var j = $td.index();\r\n      // TODO [akamel] 1- check if $td is th; 2- throw if el is neither th or td as it is assumed in this function\r\n      var isHeader = $td.closest('thead', this.el).length;\r\n      var ret = { header: isHeader };\r\n\r\n      // we are not in header\r\n      if (isHeader) {\r\n        if (i === 0) {\r\n          ret.property = this.data.select[j];\r\n        } else if (i === 1) {\r\n          ret.property = this.data.subSelect[j];\r\n        } else {\r\n          ret.property = this.data.selectExpand[j];\r\n        }\r\n      } else {\r\n        ret.model = this.data.value[i];\r\n        if (this.data.selectExpand) {\r\n          ret.property = this.data.selectExpand[j];\r\n        } else {\r\n          ret.property = this.data.select[j];\r\n        }\r\n      }\r\n\r\n      ret.column = this.data.columns[ret.property];\r\n      if (ret.property === this.grid.projection.get('column.checked')) {\r\n        // TODO [akamel] this shouldn't be here\r\n        var checkbox = $el.find('.column-selection');\r\n        if (checkbox.length) {\r\n          ret.checked = checkbox[0].checked;\r\n        }\r\n      }\r\n      ret.grid = this.grid;\r\n\r\n      return ret;\r\n    },\r\n\r\n    // TODO [akamel] [perf] 8.5%\r\n    toHTML: function (value) {\r\n      var data = _.defaults({ value: value }, this.data);\r\n\r\n      _.each(data.columns, function (col) {\r\n        if (_.isObject(col.$metadata)) {\r\n          if (_.has(col.$metadata['attr.head'], 'class') && _.isArray(col.$metadata['attr.head'].class)) {\r\n            col.$metadata['attr.head'].class = col.$metadata['attr.head'].class.join(' ');\r\n          }\r\n\r\n          if (_.has(col.$metadata['attr.body'], 'class') && _.isArray(col.$metadata['attr.body'].class)) {\r\n            col.$metadata['attr.body'].class = col.$metadata['attr.body'].class.join(' ');\r\n          }\r\n\r\n         // TODO [akamel] merge attr that are on $metadata['attr']\r\n        }\r\n      });\r\n\r\n      return this.options.template(data);\r\n    },\r\n\r\n    update: function (model) {\r\n      _.each(this.renderers, function (renderer) {\r\n        renderer.update && renderer.update();\r\n      });\r\n\r\n      var value = model.get('value');\r\n      var columns = model.get('columns');\r\n      var columnsDelta = {};\r\n      var colOptions = this.options.columns || {};\r\n      var orderby = {};\r\n\r\n      _.each(this.grid.projection.get('orderby'), function (element, index) {\r\n        var key = _.first(_.keys(element));\r\n        orderby[key] = {\r\n          dir: element[key],\r\n          index: index,\r\n        };\r\n      });\r\n\r\n      _.each(columns, function (col, property) {\r\n      // TODO [akamel] consider filtering which props to copy/override\r\n        var delta = {};\r\n        var colOption = colOptions[property];\r\n        var orderName = property;\r\n\r\n        if (colOption && _.isString(colOption.sortable)) {\r\n          orderName = colOption.sortable;\r\n        } else if (col && _.isString(col.sortable)) {\r\n          orderName = col.sortable;\r\n        }\r\n\r\n        if (orderby[orderName]) {\r\n          delta.$orderby = orderby[orderName];\r\n        }\r\n\r\n        columnsDelta[property] = _.defaults(delta, colOption, col);\r\n      });\r\n\r\n      if (_.has(this.options.$metadata, 'class') && _.isArray(this.options.$metadata.class)) {\r\n        this.options.$metadata.class = this.options.$metadata.class.join(' ');\r\n      }\r\n\r\n      var delta = {\r\n        'value': value,\r\n        'columns': columnsDelta,\r\n        'columns.lookup': _.indexBy(columns, function (col) {\r\n          return col.property;\r\n        }),\r\n        '$metadata': this.options.$metadata,\r\n        'hideHeaders': this.options.hideHeaders,\r\n      };\r\n\r\n      this.data = _.defaults(delta, model.toJSON());\r\n\r\n      this.draw({ canSkipDraw: false });\r\n    },\r\n\r\n    scheduleDraw: function () {\r\n      if (!this.scheduledDraw) {\r\n        this.scheduledDraw = true;\r\n\r\n        window.requestAnimationFrame(function () {\r\n          this.scheduledDraw = false;\r\n          this.draw();\r\n        }.bind(this));\r\n      }\r\n    },\r\n\r\n    drawable: function () {\r\n      return this.data;\r\n    },\r\n\r\n    getRenderer: function (name) {\r\n      return _.find(this.renderers, function (r) {\r\n        return r.name === name;\r\n      });\r\n    },\r\n\r\n    draw: function (options) {\r\n      if (!this.drawable()) {\r\n        return;\r\n      }\r\n\r\n      this.trigger('render:beginning');\r\n\r\n      var renderers = this.renderers;\r\n      var i = 0;\r\n\r\n      var middleware = function (data, cb) {\r\n        var r = renderers[i++];\r\n        if (r) {\r\n          var clone = _.defaults({}, data, { css: {} });\r\n          delete clone.canSkipDraw;\r\n\r\n          r.draw(clone, _.once(function (err, res) {\r\n            res.canSkipDraw = data.canSkipDraw === true && res.canSkipDraw === true;\r\n            if (err) {\r\n              cb(err);\r\n            } else {\r\n              middleware(res || clone, cb);\r\n            }\r\n          }));\r\n        } else {\r\n          cb(undefined, data);\r\n        }\r\n      };\r\n\r\n      var canSkipDraw = _.has(options, 'canSkipDraw') ? options.canSkipDraw : true;\r\n\r\n      // this is _not_ and _cannot_ be async\r\n      middleware({ rows: this.data.value, canSkipDraw: canSkipDraw }, function (err, res) {\r\n        res.css && this.$el.css(res.css);\r\n\r\n        if (err) {\r\n          throw err;\r\n        }\r\n\r\n        this.removeSubviews();\r\n\r\n        if (res.canSkipDraw !== true) {\r\n          this.el.innerHTML = this.toHTML(res.rows);\r\n        }\r\n\r\n        _.each(this.data.columns, function (column) {\r\n          if (column.config) {\r\n            if (_.isFunction(column.config.View)) {\r\n              this.$('td.col-' + column.config.name).each(function (index, el) {\r\n                var cellView = new column.config.View({ model: this.dataFor(el).model });\r\n                this.$(el).html(cellView.render().el);\r\n                this.subviews.push(cellView);\r\n              }.bind(this));\r\n            }\r\n            if (_.isFunction(column.config.HeaderView)) {\r\n              this.$('th.col-' + column.config.name).each(function (index, el) {\r\n                var headerView = new column.config.HeaderView();\r\n                this.$(el).html(headerView.render().el);\r\n                this.subviews.push(headerView);\r\n              }.bind(this));\r\n            }\r\n          }\r\n        }, this);\r\n      }.bind(this));\r\n\r\n      this.trigger('render:finished');\r\n    },\r\n\r\n    render: function () {\r\n      this.grid.on('change:data', this.update);\r\n\r\n      // this.grid.projection.data.on('change', this.update);\r\n    },\r\n  });\r\n\r\n  View.partial = function (options) {\r\n    return View.extend({ options: options });\r\n  };\r\n\r\n  return View;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/table.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"backbone\"\n ** module id = 7\n ** module chunks = 0\n **/","var jade = require(\"D:\\\\src\\\\projection-grid\\\\node_modules\\\\jade\\\\lib\\\\runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function ($metadata, columns, hideHeaders, isApplyGroup, subSelect, undefined, value) {\njade_mixins[\"columnHeader\"] = jade_interp = function(column){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nif ( column.$orderby)\n{\nif ( column.$orderby.dir > 0)\n{\nbuf.push(\"<span class=\\\"grid-asc\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"grid-des\\\"></span>\");\n}\n}\nif ( (column && column.$html))\n{\nbuf.push(null == (jade_interp = column.$html) ? \"\" : jade_interp);\n}\nelse\n{\nbuf.push(jade.escape(null == (jade_interp = (typeof column.$text != 'undefined')? column.$text : (column.property || column)) ? \"\" : jade_interp));\n}\n};\njade_mixins[\"th\"] = jade_interp = function(column, hasGroup, isSubColumn){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nvar attr = (column.$metadata || {})['attr.head'] || {}\nvar colName = column.config && column.config.name || '';\nvar cls = [];\nif ( (colName))\n{\ncls.push('col-' + colName);\n}\nif ( column.sortable)\n{\ncls.push('sortable');\n}\nif ( column.$orderby)\n{\ncls.push('orderby');\n}\ncls = cls.join(' ');\nif ( isSubColumn )\n{\nvar colspan = 1, rowspan = 1;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \">\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</th>\");\n}\nelse if ( hasGroup && column.groupExpansion)\n{\nvar colspan = column.group.length, rowspan = 1;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \"><span class=\\\"pop-collapse glyphicon glyphicon-minus\\\"></span><div>\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</div></th>\");\n}\nelse if ( hasGroup && column.group)\n{\nvar colspan = 1, rowspan = 2;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \"><span class=\\\"pop-expand glyphicon glyphicon-plus\\\"></span><div>\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</div></th>\");\n}\nelse\n{\nvar colspan = 1, rowspan = 2;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \">\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</th>\");\n}\n};\njade_mixins[\"td\"] = jade_interp = function(row, column){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nvar attr = (column.$metadata || {})['attr.body'] || {}\nvar colName = column.config && column.config.name || '';\nvar cls = colName ? 'col-' + colName : '';\nbuf.push(\"<td\" + (jade.attrs(jade.merge([{\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \">\");\nvar res = row[column.property]\nif ( (res && res.$html))\n{\nbuf.push(null == (jade_interp = res.$html) ? \"\" : jade_interp);\n}\nelse\n{\nbuf.push(jade.escape(null == (jade_interp = res) ? \"\" : jade_interp));\n}\nbuf.push(\"</td>\");\n};\nbuf.push(\"<table\" + (jade.attrs(jade.merge([{\"class\": \"table table-hover grid\"},$metadata || {}]), true)) + \">\");\nif ( !hideHeaders)\n{\nbuf.push(\"<thead>\");\nif ( isApplyGroup && subSelect.length === 0)\n{\nbuf.push(\"<tr class=\\\"table__row--header\\\">\");\n// iterate locals['select'] || []\n;(function(){\n  var $$obj = locals['select'] || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n}\nelse if ( isApplyGroup)\n{\nbuf.push(\"<tr class=\\\"table__row--header\\\">\");\n// iterate locals['select'] || []\n;(function(){\n  var $$obj = locals['select'] || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr><tr class=\\\"table__row--header table__row--sub-header\\\">\");\n// iterate locals['subSelect']\n;(function(){\n  var $$obj = locals['subSelect'];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true, true);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true, true);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n}\nelse\n{\nbuf.push(\"<tr class=\\\"table__row--header\\\">\");\n// iterate locals['select'] || []\n;(function(){\n  var $$obj = locals['select'] || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName]);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName]);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n}\nbuf.push(\"</thead>\");\n}\nbuf.push(\"<tbody>\");\n// iterate value\n;(function(){\n  var $$obj = value;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var row = $$obj[i];\n\nvar attr = (row.$metadata || {}).attr || {}\nbuf.push(\"<tr\" + (jade.attrs(jade.merge([{\"class\": \"table__row--body\"},attr]), true)) + \">\");\n// iterate locals['selectExpand'] || locals.select\n;(function(){\n  var $$obj = locals['selectExpand'] || locals.select;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var row = $$obj[i];\n\nvar attr = (row.$metadata || {}).attr || {}\nbuf.push(\"<tr\" + (jade.attrs(jade.merge([{\"class\": \"table__row--body\"},attr]), true)) + \">\");\n// iterate locals['selectExpand'] || locals.select\n;(function(){\n  var $$obj = locals['selectExpand'] || locals.select;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tbody></table>\");}.call(this,\"$metadata\" in locals_for_with?locals_for_with.$metadata:typeof $metadata!==\"undefined\"?$metadata:undefined,\"columns\" in locals_for_with?locals_for_with.columns:typeof columns!==\"undefined\"?columns:undefined,\"hideHeaders\" in locals_for_with?locals_for_with.hideHeaders:typeof hideHeaders!==\"undefined\"?hideHeaders:undefined,\"isApplyGroup\" in locals_for_with?locals_for_with.isApplyGroup:typeof isApplyGroup!==\"undefined\"?isApplyGroup:undefined,\"subSelect\" in locals_for_with?locals_for_with.subSelect:typeof subSelect!==\"undefined\"?subSelect:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"value\" in locals_for_with?locals_for_with.value:typeof value!==\"undefined\"?value:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/table.jade\n ** module id = 8\n ** module chunks = 0\n **/","'use strict';\n\n/**\n * Merge two attribute objects giving precedence\n * to values in object `b`. Classes are special-cased\n * allowing for arrays and merging/joining appropriately\n * resulting in a string.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n * @api private\n */\n\nexports.merge = function merge(a, b) {\n  if (arguments.length === 1) {\n    var attrs = a[0];\n    for (var i = 1; i < a.length; i++) {\n      attrs = merge(attrs, a[i]);\n    }\n    return attrs;\n  }\n  var ac = a['class'];\n  var bc = b['class'];\n\n  if (ac || bc) {\n    ac = ac || [];\n    bc = bc || [];\n    if (!Array.isArray(ac)) ac = [ac];\n    if (!Array.isArray(bc)) bc = [bc];\n    a['class'] = ac.concat(bc).filter(nulls);\n  }\n\n  for (var key in b) {\n    if (key != 'class') {\n      a[key] = b[key];\n    }\n  }\n\n  return a;\n};\n\n/**\n * Filter null `val`s.\n *\n * @param {*} val\n * @return {Boolean}\n * @api private\n */\n\nfunction nulls(val) {\n  return val != null && val !== '';\n}\n\n/**\n * join array as classes.\n *\n * @param {*} val\n * @return {String}\n */\nexports.joinClasses = joinClasses;\nfunction joinClasses(val) {\n  return (Array.isArray(val) ? val.map(joinClasses) :\n    (val && typeof val === 'object') ? Object.keys(val).filter(function (key) { return val[key]; }) :\n    [val]).filter(nulls).join(' ');\n}\n\n/**\n * Render the given classes.\n *\n * @param {Array} classes\n * @param {Array.<Boolean>} escaped\n * @return {String}\n */\nexports.cls = function cls(classes, escaped) {\n  var buf = [];\n  for (var i = 0; i < classes.length; i++) {\n    if (escaped && escaped[i]) {\n      buf.push(exports.escape(joinClasses([classes[i]])));\n    } else {\n      buf.push(joinClasses(classes[i]));\n    }\n  }\n  var text = joinClasses(buf);\n  if (text.length) {\n    return ' class=\"' + text + '\"';\n  } else {\n    return '';\n  }\n};\n\n\nexports.style = function (val) {\n  if (val && typeof val === 'object') {\n    return Object.keys(val).map(function (style) {\n      return style + ':' + val[style];\n    }).join(';');\n  } else {\n    return val;\n  }\n};\n/**\n * Render the given attribute.\n *\n * @param {String} key\n * @param {String} val\n * @param {Boolean} escaped\n * @param {Boolean} terse\n * @return {String}\n */\nexports.attr = function attr(key, val, escaped, terse) {\n  if (key === 'style') {\n    val = exports.style(val);\n  }\n  if ('boolean' == typeof val || null == val) {\n    if (val) {\n      return ' ' + (terse ? key : key + '=\"' + key + '\"');\n    } else {\n      return '';\n    }\n  } else if (0 == key.indexOf('data') && 'string' != typeof val) {\n    if (JSON.stringify(val).indexOf('&') !== -1) {\n      console.warn('Since Jade 2.0.0, ampersands (`&`) in data attributes ' +\n                   'will be escaped to `&amp;`');\n    };\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will eliminate the double quotes around dates in ' +\n                   'ISO form after 2.0.0');\n    }\n    return ' ' + key + \"='\" + JSON.stringify(val).replace(/'/g, '&apos;') + \"'\";\n  } else if (escaped) {\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will stringify dates in ISO form after 2.0.0');\n    }\n    return ' ' + key + '=\"' + exports.escape(val) + '\"';\n  } else {\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will stringify dates in ISO form after 2.0.0');\n    }\n    return ' ' + key + '=\"' + val + '\"';\n  }\n};\n\n/**\n * Render the given attributes object.\n *\n * @param {Object} obj\n * @param {Object} escaped\n * @return {String}\n */\nexports.attrs = function attrs(obj, terse){\n  var buf = [];\n\n  var keys = Object.keys(obj);\n\n  if (keys.length) {\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i]\n        , val = obj[key];\n\n      if ('class' == key) {\n        if (val = joinClasses(val)) {\n          buf.push(' ' + key + '=\"' + val + '\"');\n        }\n      } else {\n        buf.push(exports.attr(key, val, false, terse));\n      }\n    }\n  }\n\n  return buf.join('');\n};\n\n/**\n * Escape the given string of `html`.\n *\n * @param {String} html\n * @return {String}\n * @api private\n */\n\nvar jade_encode_html_rules = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\nvar jade_match_html = /[&<>\"]/g;\n\nfunction jade_encode_char(c) {\n  return jade_encode_html_rules[c] || c;\n}\n\nexports.escape = jade_escape;\nfunction jade_escape(html){\n  var result = String(html).replace(jade_match_html, jade_encode_char);\n  if (result === '' + html) return html;\n  else return result;\n};\n\n/**\n * Re-throw the given `err` in context to the\n * the jade in `filename` at the given `lineno`.\n *\n * @param {Error} err\n * @param {String} filename\n * @param {String} lineno\n * @api private\n */\n\nexports.rethrow = function rethrow(err, filename, lineno, str){\n  if (!(err instanceof Error)) throw err;\n  if ((typeof window != 'undefined' || !filename) && !str) {\n    err.message += ' on line ' + lineno;\n    throw err;\n  }\n  try {\n    str = str || require('fs').readFileSync(filename, 'utf8')\n  } catch (ex) {\n    rethrow(err, null, lineno)\n  }\n  var context = 3\n    , lines = str.split('\\n')\n    , start = Math.max(lineno - context, 0)\n    , end = Math.min(lines.length, lineno + context);\n\n  // Error context\n  var context = lines.slice(start, end).map(function(line, i){\n    var curr = i + start + 1;\n    return (curr == lineno ? '  > ' : '    ')\n      + curr\n      + '| '\n      + line;\n  }).join('\\n');\n\n  // Alter exception message\n  err.path = filename;\n  err.message = (filename || 'Jade') + ':' + lineno\n    + '\\n' + context + '\\n\\n' + err.message;\n  throw err;\n};\n\nexports.DebugItem = function DebugItem(lineno, filename) {\n  this.lineno = lineno;\n  this.filename = filename;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/jade/lib/runtime.js\n ** module id = 9\n ** module chunks = 0\n **/","/* (ignored) */\n\n\n/*****************\n ** WEBPACK FOOTER\n ** fs (ignored)\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = {\r\n  FixedHeader: require('./fixed-header'),\r\n  Virtualization: require('./virtualization'),\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/renderer/index.js\n **/","define([\r\n  'lib/jquery',\r\n  'lib/underscore',\r\n  'component/grid/layout/measure',\r\n  'component/grid/layout/px',\r\n], function ($, _, measure, px) {\r\n  function Renderer(options) {\r\n    this.options = options || {};\r\n\r\n    this.name = 'fixed-header';\r\n    this.layout = this.options.layout;\r\n  }\r\n\r\n  Renderer.prototype.draw = function (data, cb) {\r\n    data.vpMeasures = data.vpMeasures = measure.viewport.call(this.layout);\r\n    if (data.vpMeasures.top > 0) {\r\n      var $el = this.layout.$el;\r\n\r\n      // todo [akamel] assumes we have table rendered; measure/estimate otherwise\r\n\r\n      // a. compensate for header displacement\r\n      // .. as we set 'thead > tr' css position 'absolute'\r\n      var displacement = $el.find('thead tr').outerHeight();\r\n      _.extend(data.css, {\r\n        'padding-top': px.pixelify(px.parse(data.css['padding-top']) + displacement),\r\n      });\r\n\r\n      data.canSkipDraw = true;\r\n\r\n      // b. yield to render\r\n      cb(undefined, data);\r\n\r\n      // c. get newly rendered header\r\n      var $thead = $el.find('thead');\r\n      var $headTR = $el.find('thead > tr');\r\n      var $headTD = $headTR.first().children();\r\n      var $secondHeadTD = $headTR.eq(1).children();\r\n      var $bodyTD = $el.find('tbody > tr:first-child').children();\r\n\r\n      var $ref = $bodyTD;\r\n      var $target = $headTD;\r\n\r\n      // d. capture header col computed width\r\n      // todo [akamel] [perf] 16%\r\n      this.colWidth = this.colWidth || _.map($ref, function (td) {\r\n        return $(td).width();\r\n      });\r\n\r\n      // todo [akamel] [perf] 12% -- consider replacing with css rule generation\r\n      // e. freeze column width\r\n      // e.1 freeze col width\r\n      var colIndex = 0;\r\n      var secondHeadTDIndex = 0;\r\n      _.each($target, function (td) {\r\n        var colspan = parseInt($(td).attr('colspan'), 10);\r\n        var rowspan = parseInt($(td).attr('rowspan'), 10);\r\n        var width = 0;\r\n        for (var i = 0; i < colspan; ++i) {\r\n          var colWidth = px.pixelify(this.colWidth[colIndex + i]);\r\n          width += colWidth;\r\n          if (rowspan === 1) {\r\n            $secondHeadTD.eq(secondHeadTDIndex + i).width(colWidth);\r\n          }\r\n        }\r\n        $(td).width(width);\r\n        colIndex += colspan;\r\n        if (rowspan === 1) {\r\n          secondHeadTDIndex += colspan;\r\n        }\r\n      }.bind(this));\r\n\r\n      _.each($ref, function (td, index) {\r\n        $(td).width(px.pixelify(this.colWidth[index]));\r\n      }.bind(this));\r\n\r\n      // f. set position 'fixed' and lock header at top of table\r\n      $thead.css({\r\n        'position': this.layout.container.el === window ? 'fixed' : 'absolute',\r\n        'top': px.pixelify(this.layout.container.el === window ? 0 : this.layout.container.$el.scrollTop()),\r\n        'margin-left': px.pixelify(-data.vpMeasures.offsetLeft),\r\n        'z-index': 1000,\r\n      });\r\n    } else {\r\n      _.extend(data.css, {\r\n        'padding-top': px.pixelify(px.parse(data.css['padding-top'])),\r\n      });\r\n\r\n      cb(undefined, data);\r\n    }\r\n  };\r\n\r\n  Renderer.partial = function (options) {\r\n    return function (o) {\r\n      return new Renderer(_.defaults({}, o, options));\r\n    };\r\n  };\r\n\r\n  return Renderer;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/renderer/fixed-header.js\n **/","define([\r\n  'lib/jquery',\r\n  'lib/underscore',\r\n], function ($, _) {\r\n  function viewport(el, container) {\r\n    var $el = el ? $(el) : this.$el;\r\n\r\n    container = container || this.container;\r\n    var $viewport = container.$el;\r\n\r\n    var viewportTop = $viewport.scrollTop();\r\n    var viewportBottom = viewportTop + $viewport.height();\r\n    var viewportLeft = $viewport.scrollLeft();\r\n\r\n    var boundsTop = container.offset($el).top;\r\n    var boundsBottom = boundsTop + $el.innerHeight();\r\n    // var boundsLeft = $el.offset().left;\r\n\r\n    var visibleTop = Math.max(boundsTop, viewportTop);\r\n    var visibleBottom = Math.min(boundsBottom, viewportBottom);\r\n    // var visibleLeft = Math.max(boundsLeft, viewportLeft);\r\n\r\n    return {\r\n      top: visibleTop - boundsTop,\r\n      bottom: visibleBottom - boundsTop,\r\n      offsetLeft: viewportLeft,\r\n    };\r\n  }\r\n\r\n  function dimensions(el) {\r\n    var $el = el ? $(el) : this.$el;\r\n\r\n    // calculate heights\r\n    // a. header\r\n    var ret = {\r\n      rows: [],\r\n      thead: $el.find('thead > tr').outerHeight(),\r\n    };\r\n\r\n    // b. keep row info\r\n    $el.find('tbody').children('tr').each(function () {\r\n      ret.rows.push($(this).outerHeight());\r\n    });\r\n\r\n    // c. update average row height\r\n    var avg = _.reduce(ret.rows, function (memo, num) {\r\n      return memo + num;\r\n    }, 0) / (ret.rows.length === 0 ? 1 : ret.rows.length);\r\n\r\n    ret.avgRowHeight = avg;\r\n    ret.estimateHeight = (_.size(this.data.value) * avg) + ret.thead;\r\n\r\n    return ret;\r\n  }\r\n\r\n  function sample() {\r\n    // a. render test pass\r\n    var $tmpEl = $('<div style=\"visibility:hidden\" />');\r\n    var sample = _.first(this.data.value, 20);\r\n\r\n    this.$el.append($tmpEl);\r\n\r\n    $tmpEl[0].innerHTML = this.toHTML(sample);\r\n\r\n    // b. take measures\r\n    var ret = dimensions.call(this, $tmpEl);\r\n\r\n    // c. clean-up\r\n    $tmpEl.remove();\r\n\r\n    return ret;\r\n  }\r\n\r\n  return {\r\n    viewport: viewport,\r\n    dimensions: dimensions,\r\n    sample: sample,\r\n  };\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/measure.js\n **/","// todo [akamel] move to /component\r\ndefine(['lib/underscore'], function (_) {\r\n  function parse(a) {\r\n    return abs(parseFloat(a));\r\n  }\r\n\r\n  function abs(a) {\r\n    return _.isFinite(a) ? a : 0;\r\n  }\r\n\r\n  function pixelify(a) {\r\n    return abs(a) + 'px';\r\n  }\r\n\r\n  return {\r\n    parse: parse,\r\n    pixelify: pixelify,\r\n  };\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/px.js\n **/","// TODO [akamel] [bug] with large data set, jitters when scrolling to bottom\r\n\r\ndefine([\r\n  'lib/jquery',\r\n  'lib/underscore',\r\n  'component/grid/layout/measure',\r\n  'component/grid/layout/px',\r\n], function ($, _, measure, px) {\r\n  function rowHeight(row) {\r\n    return _.isNumber(row.__height) ? row.__height : this.__measures.avgRowHeight;\r\n  }\r\n\r\n  function estimateHeight(first, last) {\r\n    var rows = this.layout.data.value;\r\n\r\n    var ret = 0;\r\n    for (var i = first; i <= last; i++) {\r\n      ret += rowHeight.call(this, rows[i]);\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  function rowAtOffset(offset) {\r\n    var rem = offset;\r\n\r\n    if (rem <= 0) {\r\n      return 0;\r\n    }\r\n\r\n    var ret = -1;\r\n    var count = _.size(this.layout.data.value);\r\n\r\n    while (rem > 0 && ret < count - 1) {\r\n      ret++;\r\n      rem -= rowHeight.call(this, ret);\r\n    }\r\n\r\n    return (ret < count) ? ret : -1;\r\n  }\r\n\r\n  function Renderer(options) {\r\n    this.options = options || {};\r\n\r\n    this.name = 'virtualization';\r\n    this.layout = this.options.layout;\r\n  }\r\n\r\n  Renderer.prototype.draw = function (data, cb) {\r\n    // a. define data set\r\n    var value = this.layout.data.value;\r\n    var count = _.size(value);\r\n    var first = 0;\r\n    var last = count - 1;\r\n\r\n    // b. render test pass / take initial measures\r\n    if (!this.__measures) {\r\n      var smpl = measure.sample.call(this.layout);\r\n      this.__measures = _.pick(smpl, 'avgRowHeight', 'estimateHeight', 'thead');\r\n\r\n      // b.1 set height based on measures estimate\r\n      this.layout.$el.css({\r\n        'padding-top': px.pixelify(this.__measures.estimateHeight),\r\n      });\r\n    }\r\n\r\n    // c. find visible viewport\r\n    data.vpMeasures = data.vpMeasures || measure.viewport.call(this.layout);\r\n\r\n    // d. find rendable rows\r\n    first = rowAtOffset.call(this, data.vpMeasures.top - this.__measures.thead);\r\n    last = rowAtOffset.call(this, data.vpMeasures.bottom - this.__measures.thead);\r\n\r\n    // d.1 add a few rows before and after our calculations to account for measurment estimation err\r\n    var errMarginRowCount = 5;\r\n\r\n    first -= errMarginRowCount;\r\n    last += errMarginRowCount;\r\n\r\n    first = Math.max(0, first);\r\n    last = Math.min((last < 0) ? count - 1 : last, count - 1);\r\n\r\n    var pTop = estimateHeight.call(this, 0, first - 1);\r\n    var pBottom = estimateHeight.call(this, last + 1, count - 1);\r\n\r\n    data.rows = value.slice(first, last + 1);\r\n\r\n    _.extend(data.css, {\r\n      'padding-top': px.pixelify(pTop + px.parse(data.css['padding-top'])),\r\n      'padding-bottom': px.pixelify(pBottom + px.parse(data.css['padding-bottom'])),\r\n    });\r\n\r\n    if (this.first === first && this.last === last) {\r\n      data.canSkipDraw = true;\r\n    }\r\n\r\n    // e. yield to render\r\n    cb(undefined, data);\r\n\r\n    // f. take new measures and update avg row height\r\n    // todo [akamel] [perf] 7.5%\r\n    var tblMeasure = measure.dimensions.call(this.layout);\r\n    _.each(tblMeasure.rows, function (height, i) {\r\n      value[i + first].__height = height;\r\n    });\r\n\r\n    var heights = _.chain(value)\r\n      .map(function (row) {\r\n        return row.__height;\r\n      }).compact().value();\r\n\r\n    if (_.size(heights)) {\r\n      this.__measures.avgRowHeight = _.reduce(heights, function (memo, num) {\r\n        return memo + num;\r\n      }, 0) / _.size(heights);\r\n    }\r\n\r\n    this.first = first;\r\n    this.last = last;\r\n  };\r\n\r\n  Renderer.prototype.update = function () {\r\n    delete this.__measures;\r\n  };\r\n\r\n  Renderer.partial = function (options) {\r\n    return function (o) {\r\n      return new Renderer(_.defaults({}, o, options));\r\n    };\r\n  };\r\n\r\n  return Renderer;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/renderer/virtualization.js\n **/","import _ from 'underscore';\r\nimport Backbone from 'backbone';\r\nimport projections from '../projection/index';\r\nimport { delegateEvents } from './utility';\r\n\r\nconst projectionConfigs = {\r\n  AggregateRow(config) {\r\n    const configAgg = {};\r\n\r\n    if (_.has(config.aggregate, 'top')) {\r\n      configAgg['aggregate.top'] = config.aggregate.top;\r\n    }\r\n\r\n    if (_.has(config.aggregate, 'bottom')) {\r\n      configAgg['aggregate.bottom'] = config.aggregate.bottom;\r\n    }\r\n\r\n    return configAgg;\r\n  },\r\n\r\n  JSData(config) {\r\n    return {\r\n      'jsdata.entity': config.dataSource.resource,\r\n      'jsdata.query': config.dataSource.query,\r\n      'jsdata.options': config.dataSource.options,\r\n    };\r\n  },\r\n\r\n  Map(config) {\r\n    const properties = _.reduce(config.columns, (memo, { name, value, field }) => {\r\n      memo[name] = value || (item => _.reduce(\r\n        (field || name).split('/'),\r\n        (memo, prop) => _.result(memo, prop),\r\n        item\r\n      ));\r\n      return memo;\r\n    }, {});\r\n\r\n    return {\r\n      map(item) {\r\n        return _.reduce(config.columns, (memo, { name }) => {\r\n          memo[name] = properties[name](item);\r\n          return memo;\r\n        }, {});\r\n      },\r\n    };\r\n  },\r\n\r\n  Columns(config) {\r\n    const columns = _.reduce(config.columns, (columns, column) => {\r\n      const $metadata = {};\r\n\r\n      if (column.attributes) {\r\n        $metadata['attr.body'] = column.attributes;\r\n      }\r\n\r\n      if (column.headerAttributes) {\r\n        $metadata['attr.head'] = column.headerAttributes;\r\n      }\r\n\r\n      columns[column.name] = {\r\n        sortable: column.sortable,\r\n        $metadata,\r\n        config: column,\r\n      };\r\n\r\n      return columns;\r\n    }, {});\r\n\r\n    if (config.selectable) {\r\n      columns.checkbox = {\r\n        config: { name: 'selection' },\r\n      };\r\n    }\r\n\r\n    if (_.has(config.columnShifter, 'totalColumns')) {\r\n      columns['column.skip.less'] = {\r\n        config: { name: 'skip-less' },\r\n      };\r\n      columns['column.skip.more'] = {\r\n        config: { name: 'skip-more' },\r\n      };\r\n    }\r\n\r\n    return { columns };\r\n  },\r\n\r\n  ColumnI18n(config) {\r\n    return {\r\n      'column.i18n': _.reduce(config.columns, (columnI18n, column) => {\r\n        columnI18n[column.name] = column.title || column.name;\r\n        return columnI18n;\r\n      }, {}),\r\n    };\r\n  },\r\n\r\n  ColumnQueryable(config) {\r\n    const columnIn = _.chain(config.columns)\r\n      .reject(_.property('hidden'))\r\n      .map(_.property('name'))\r\n      .value();\r\n    const columnLock = _.chain(config.columns)\r\n      .filter(_.property('locked'))\r\n      .map(_.property('name'))\r\n      .value();\r\n    const colqConfig = {\r\n      'column.lock': columnLock,\r\n      'column.in': columnIn,\r\n    };\r\n\r\n    if (config.selectable) {\r\n      columnIn.unshift('checkbox');\r\n      columnLock.unshift('checkbox');\r\n    }\r\n\r\n    if (_.has(config.columnShifter, 'totalColumns')) {\r\n      colqConfig['column.take'] = config.columnShifter.totalColumns;\r\n    }\r\n    return colqConfig;\r\n  },\r\n\r\n  ColumnShifter() {},\r\n\r\n  ColumnTemplate(config) {\r\n    return {\r\n      'column.template': _.reduce(config.columns, (columnTmpl, column) => {\r\n        if (column.headerTemplate) {\r\n          columnTmpl[column.name] = column.headerTemplate;\r\n        }\r\n        return columnTmpl;\r\n      }, {}),\r\n    };\r\n  },\r\n\r\n  Editable(config) {\r\n    return {\r\n      'column.editable': _.chain(config.columns)\r\n        .filter(_.property('editable'))\r\n        .map(_.property('name'))\r\n        .value(),\r\n    };\r\n  },\r\n\r\n  MemoryQueryable() { },\r\n\r\n  PropertyTemplate(config) {\r\n    return {\r\n      'property.template': _.reduce(config.columns, (propTmpl, column) => {\r\n        if (column.template) {\r\n          propTmpl[column.name] = column.template;\r\n        }\r\n        return propTmpl;\r\n      }, {}),\r\n    };\r\n  },\r\n\r\n  RowIndex() { },\r\n\r\n  RowCheckbox(config) {\r\n    return {\r\n      'row.check.id': _.chain(config)\r\n        .result('dataSource')\r\n        .result('schema')\r\n        .result('key', 'rowIndex')\r\n        .value(),\r\n      'row.check.single': config.selectable === 'single',\r\n      'column.checked': 'checkbox',\r\n      'row.check.allow': function (model) {\r\n        var type = _.chain(model).result('$metadata').result('type').value();\r\n\r\n        return !_.contains([\r\n          'segmentation',\r\n          'aggregate',\r\n        ], type);\r\n      },\r\n    };\r\n  },\r\n\r\n  Page(config) {\r\n    return {\r\n      'page.size': config.pageable.pageSize,\r\n      'page.number': 0,\r\n    };\r\n  },\r\n\r\n  Sink(config) {\r\n    const data = _.result(config.dataSource, 'data', []);\r\n\r\n    if (_.isArray(data)) {\r\n      return { seed: data };\r\n    } else if (data instanceof Backbone.Collection) {\r\n      return { seed: data.toJSON() };\r\n    }\r\n  },\r\n};\r\n\r\nexport default definePlugin => definePlugin('projection', [\r\n  'config',\r\n], function (config) {\r\n  let projection = null;\r\n\r\n  function pipeProjection(name) {\r\n    const Projection = projections[name];\r\n    const configProj = projectionConfigs[name](config);\r\n    const projectionDest = new Projection(configProj);\r\n\r\n    if (projection) {\r\n      projection = projection.pipe(projectionDest);\r\n    } else {\r\n      projection = projectionDest;\r\n    }\r\n  }\r\n\r\n  const dataSourceType = config.dataSource.type || 'memory';\r\n  if (dataSourceType === 'js-data') {\r\n    pipeProjection('JSData');\r\n  } else if (dataSourceType === 'memory') {\r\n    pipeProjection('Sink');\r\n    pipeProjection('MemoryQueryable');\r\n    if (config.dataSource.data instanceof Backbone.Collection) {\r\n      let updating = false;\r\n      const scheduleUpdate = () => {\r\n        if (!updating) {\r\n          updating = true;\r\n          window.setTimeout(() => {\r\n            projection.set('seed', config.dataSource.data.toJSON());\r\n            updating = false;\r\n          }, 0);\r\n        }\r\n      };\r\n      config.dataSource.data.on('all', scheduleUpdate);\r\n    }\r\n  } else {\r\n    throw new Error(`dataSource.type \"${config.dataSource.type}\" is not supported`);\r\n  }\r\n\r\n  const dataSourceProjection = projection;\r\n\r\n  pipeProjection('Columns');\r\n  pipeProjection('Map');\r\n  if (config.aggregate) {\r\n    pipeProjection('AggregateRow');\r\n  }\r\n  pipeProjection('ColumnQueryable');\r\n  pipeProjection('ColumnI18n');\r\n\r\n  if (_.has(config.columnShifter, 'totalColumns')) {\r\n    pipeProjection('ColumnShifter');\r\n  }\r\n\r\n  pipeProjection('ColumnTemplate');\r\n  pipeProjection('PropertyTemplate');\r\n  if (config.selectable) {\r\n    pipeProjection('RowIndex');\r\n    pipeProjection('RowCheckbox');\r\n  }\r\n\r\n  if (_.has(config.pageable, 'pageSize')) {\r\n    pipeProjection('Page');\r\n  }\r\n  if (_.find(config.columns, _.property('editable'))) {\r\n    pipeProjection('Editable');\r\n  }\r\n\r\n  delegateEvents({\r\n    from: dataSourceProjection,\r\n    to: projection,\r\n    events: [\r\n      'update:beginning',\r\n      'update:finished',\r\n    ],\r\n  });\r\n\r\n  return projection;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/factory/projection-plugin.js\n **/","module.exports = {\r\n  AggregateRow: require('./aggregate-row'),\r\n  Base: require('./base'),\r\n  ColumnI18n: require('./column-i18n'),\r\n  ColumnQueryable: require('./column-queryable'),\r\n  ColumnShifter: require('./column-shifter'),\r\n  ColumnTemplate: require('./column-template'),\r\n  EditableString: require('./editable-string'),\r\n  Editable: require('./editable'),\r\n  JSData: require('./jsdata'),\r\n  Map: require('./map'),\r\n  MemoryQueryable: require('./memory-queryable'),\r\n  Memory: require('./memory'),\r\n  Mock: require('./mock'),\r\n  Odata: require('./odata'),\r\n  Page: require('./page'),\r\n  PropertyTemplate: require('./property-template'),\r\n  RowCheckbox: require('./row-checkbox'),\r\n  RowTriStateCheckboxProjection: require('./row-tri-state-checkbox'),\r\n  RowIndex: require('./row-index'),\r\n  Sink: require('./sink'),\r\n  ColumnGroup: require('./column-group'),\r\n  Columns: require('./columns').default,\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/index.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n], function (_, Backbone, BaseProjection) {\r\n  var createRows = function (fn, data) {\r\n    var rows = fn(data);\r\n\r\n    _.each(rows, function (row) {\r\n      row.$metadata = _.extend({}, row.$metadata, { type: 'aggregate' });\r\n    });\r\n\r\n    return rows;\r\n  };\r\n\r\n  var Model = BaseProjection.extend({\r\n\r\n    defaults: {\r\n      'aggregate.top': null,\r\n      'aggregate.bottom': null,\r\n    },\r\n\r\n    name: 'aggregate-row',\r\n\r\n    update: function (options) {\r\n      var value, topFn, rowTop, bottomFn, rowBottom;\r\n\r\n      if (Model.__super__.update.call(this, options)) {\r\n        value = this.src.data.get('value');\r\n\r\n        if (value) {\r\n          topFn = this.get('aggregate.top');\r\n          bottomFn = this.get('aggregate.bottom');\r\n          rowTop = _.isFunction(topFn) ? createRows(topFn, this.src.data) : null;\r\n          rowBottom = _.isFunction(bottomFn) ? createRows(bottomFn, this.src.data) : null;\r\n\r\n          if (rowTop) {\r\n            value = _.flatten(rowTop).concat(value);\r\n          }\r\n\r\n          if (rowBottom) {\r\n            value = value.concat(_.flatten(rowBottom));\r\n          }\r\n\r\n          this.patch({\r\n            value: value,\r\n          });\r\n        }\r\n      }\r\n    },\r\n\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/aggregate-row.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/model/response',\r\n], function (_, Backbone, Response) {\r\n  var Model = Backbone.Model.extend({\r\n    initialize: function () {\r\n      _.bindAll(this, 'onSrcUpdate', 'beforeSet', 'afterSet', 'update');\r\n      this.data = new Response();\r\n      this.src = undefined;\r\n      this.on('change', function (model) {\r\n        // todo [akamel] the model here is the settings model\r\n        this.update({ model: model });\r\n      }.bind(this));\r\n    },\r\n\r\n    constructor: function () {\r\n      // used to figure out which options to set localy and which ones to pass down the pipe\r\n      this.localKeys = _.keys(this.defaults);\r\n      // todo [akamel] this might prevent us from overriding initialize\r\n      Model.__super__.constructor.apply(this, arguments);\r\n    },\r\n\r\n    pipe: function (to) {\r\n      if (to) {\r\n        to.setSrc(this);\r\n      }\r\n\r\n      return to;\r\n    },\r\n\r\n    setSrc: function (src) {\r\n      this.src = src;\r\n      if (this.src) {\r\n        this.src.data.off('change', this.onSrcUpdate);\r\n        this.src.off('all', this.bubble);\r\n      }\r\n\r\n      if (this.src) {\r\n        this.src.data.on('change', this.onSrcUpdate);\r\n        this.src.on('all', this.bubble);\r\n      }\r\n\r\n      this.update();\r\n    },\r\n\r\n    patch: function (delta) {\r\n      var src = this.src ? this.src.data.toJSON() : {};\r\n      delta = _.isObject(delta) ? delta : {};\r\n\r\n      this.data.set(_.defaults(delta, this.attributes, src));\r\n    },\r\n\r\n    beforeSet: function (/* local, other */) {},\r\n    afterSet: function () {},\r\n\r\n    onSrcUpdate: function (/* model */) {\r\n      this.update(/* { model : model } */);\r\n    },\r\n    bubble: function () {\r\n      var key = _.first(arguments);\r\n\r\n      if (_.has(this.events, key)) {\r\n        var fct = this[this.events[key]];\r\n        if (_.isFunction(fct)) {\r\n          fct.apply(this, _.rest(arguments));\r\n        }\r\n      }\r\n\r\n      // todo [akamel] can this result in multiple redraw calls?\r\n      if (this.src) {\r\n        this.src.bubble.apply(this.src, _.toArray(arguments));\r\n      }\r\n    },\r\n\r\n    update: function (options) {\r\n      options = options || {};\r\n\r\n      if (this.src) {\r\n        if (options.deep) {\r\n          this.src.update(options);\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    },\r\n  });\r\n\r\n  Model.prototype.set = function (key, value, options) {\r\n    var obj = {};\r\n\r\n    if (_.isString(key)) {\r\n      obj[key] = value;\r\n    } else {\r\n      obj = key;\r\n      options = value;\r\n    }\r\n\r\n    var local = _.pick(obj, this.localKeys);\r\n    var other = _.omit(obj, this.localKeys);\r\n\r\n    this.beforeSet(local, other);\r\n\r\n    var ret = Model.__super__.set.call(this, local, options);\r\n\r\n    // todo [akamel] if we set options that span multiple data sources we will trigger change multiple times in the chain??\r\n    // pass along non-local options\r\n    if (_.size(other)) {\r\n      if (this.src) {\r\n        this.src.set(other, options);\r\n      }\r\n    }\r\n    this.afterSet();\r\n\r\n    return ret;\r\n  };\r\n\r\n  Model.keyRegex = /^([\\w_\\-$]+):(.+)$/;\r\n\r\n  Model.prototype.get = function (key) {\r\n    var match = Model.keyRegex.exec(key);\r\n\r\n    if (match) {\r\n      var type = match[1];\r\n      var name = match[2];\r\n\r\n      switch (type) {\r\n        case 'projection': {\r\n          var p = this;\r\n          do {\r\n            if (p.name === name) {\r\n              return p;\r\n            }\r\n            p = p.src;\r\n          } while (p);\r\n          break;\r\n        }\r\n        default: {\r\n          throw new Error('unknown special get key type');\r\n        }\r\n      }\r\n    } else {\r\n      var ret = Model.__super__.get.apply(this, arguments);\r\n\r\n      if (_.isUndefined(ret)) {\r\n        if (this.src) {\r\n          ret = this.src.get.apply(this.src, arguments);\r\n        }\r\n      }\r\n\r\n      return ret;\r\n    }\r\n  };\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/base.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n], function (_, Backbone) {\r\n  return Backbone.Model.extend({\r\n    defaults: {\r\n      value: [],\r\n      select: null,\r\n      count: 0,\r\n      aggregate: [],\r\n    },\r\n  });\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/model/response.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n  'component/grid/schema/properties',\r\n  'component/grid/model/response',\r\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      'column.i18n': {\r\n        '': function (name) {\r\n          return name;\r\n        },\r\n      },\r\n    },\r\n    name: 'column-i18n',\r\n    beforeSet: function (local) {\r\n      if (_.has(local, 'column.i18n')) {\r\n        if (!_.isObject(local['column.i18n'])) {\r\n          local['column.i18n'] = this.defaults['column.i18n'];\r\n        }\r\n      }\r\n    },\r\n    update: function (options) {\r\n      // todo [akamel] when calling a deep update; suppress onchange event based updates\r\n      // Model.__super__.update.call(this, options);\r\n\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var model = this.src.data;\r\n        var colOptions = this.get('column.i18n');\r\n        var columns = model.get('columns') || {};\r\n        var $default = colOptions[''];\r\n\r\n        var i18nColumns = {};\r\n        _.each(_.keys(columns), function (element) {\r\n          var opt = colOptions[element];\r\n          if (_.isUndefined(opt)) {\r\n            opt = $default;\r\n          }\r\n\r\n          i18nColumns[element] = _.defaults({\r\n            $text: _.isFunction(opt) ? opt(element) : opt,\r\n            property: element,\r\n          }, columns[element]);\r\n        });\r\n\r\n        this.patch({\r\n          columns: i18nColumns,\r\n        });\r\n      } else {\r\n        // todo [akamel] unset our properties only\r\n        // this.unset();\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/column-i18n.js\n **/","define([\r\n  'lib/underscore',\r\n], function (_) {\r\n  function from(arr) {\r\n    var obj = _.first(arr);\r\n\r\n    return _.keys(obj || {});\r\n  }\r\n\r\n  return { from: from };\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/schema/properties.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n  'component/grid/schema/properties',\r\n  'component/grid/model/response',\r\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      'column.skip': 0,\r\n      'column.take': Number.MAX_VALUE,\r\n      'column.lock': [],\r\n      'column.filter': function () {\r\n        return true;\r\n      },\r\n      'column.in': undefined,\r\n    },\r\n    name: 'column-queryable',\r\n    update: function (options) {\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var model = this.src.data;\r\n        var take = this.get('column.take');\r\n        var skip = this.get('column.skip');\r\n        var lock = this.get('column.lock') || [];\r\n        var filter = this.get('column.filter');\r\n        // todo [akamel] consider renaming to column.select\r\n        var $in = this.get('column.in');\r\n        var select = _.size(model.get('columns')) ? _.map(model.get('columns'), function (i) {\r\n          return i.property;\r\n        }) : model.get('select');\r\n        var unlocked = _.isFunction(filter) ? _.filter($in || select, filter) : ($in || select);\r\n        var lookup = model.get('columns');\r\n        var set = _.chain(unlocked).difference(lock).value();\r\n        var col = set;\r\n\r\n        if (!_.isNumber(take)) {\r\n          take = Number.MAX_VALUE;\r\n        }\r\n\r\n        take = Math.max(take - _.size(lock), 0);\r\n        if (_.size(set) < skip) {\r\n          skip = 0;\r\n          // this.set({ 'columns.skip' : 0 }, { silent : true });\r\n        }\r\n\r\n        // start query\r\n        var skipped = _.first(set, skip);\r\n\r\n        if (skip) {\r\n          col = _.rest(set, skip);\r\n        }\r\n\r\n        var remaining = _.rest(col, take);\r\n\r\n        col = _.union(lock, _.first(col, take));\r\n        // end query\r\n\r\n        _.each(col, function (element) {\r\n          if (!lookup[element]) {\r\n            lookup[element] = { property: element };\r\n          }\r\n          lookup[element].$lock = _.contains(lock, element);\r\n        });\r\n\r\n        this.patch({\r\n          'select': col,\r\n          // todo [akamel] rename to column.in???\r\n          // , 'columns.select'  : set\r\n          'columns.skipped': skipped,\r\n          'columns.remaining': remaining,\r\n          // , 'columns.count'   : _.size(res)\r\n          // todo [akamel] do we still need to update skip?\r\n          'column.skip': skip,\r\n        });\r\n      } else {\r\n        // todo [akamel] unset our properties only\r\n        // this.unset();\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/column-queryable.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n  'component/grid/schema/properties',\r\n  'component/grid/model/response',\r\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n    },\r\n    name: 'column-shifter',\r\n    events: {\r\n      'layout:click:header': 'thClick',\r\n    },\r\n    update: function (options) {\r\n      // todo [akamel] when calling a deep update; suppress onchange event based updates\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var model = this.src.data;\r\n        // todo [akamel] have 'columns' crated at the source so we don't have to put this all over the place\r\n        var columns = model.get('columns');\r\n        var select = model.get('select');\r\n        var colSkipped = model.get('columns.skipped');\r\n        var colRemaining = model.get('columns.remaining');\r\n\r\n        var unlockedAt = Math.max(_.findIndex(select, function (col) {\r\n          return columns[col] && !columns[col].$lock;\r\n        }), 0);\r\n\r\n        var hasLess = _.size(colSkipped);\r\n        var hasMore = _.size(colRemaining);\r\n\r\n        var colLess = {\r\n          property: 'column.skip.less',\r\n          $metadata: {\r\n            'attr.head': { class: ['skip-less'] },\r\n            'enabled': hasLess,\r\n          },\r\n          $html: '<span class=\"glyphicon glyphicon-triangle-left\" />',\r\n        };\r\n        var colMore = {\r\n          property: 'column.skip.more',\r\n          $metadata: {\r\n            'attr.head': { class: ['skip-more'] },\r\n            'enabled': hasMore,\r\n          },\r\n          $html: '<span class=\"glyphicon glyphicon-triangle-right\" />',\r\n        };\r\n\r\n        if (!hasLess) {\r\n          colLess.$metadata['attr.head'].class.push('disabled');\r\n        }\r\n\r\n        if (!hasMore) {\r\n          colMore.$metadata['attr.head'].class.push('disabled');\r\n        }\r\n\r\n        select.splice(unlockedAt, 0, colLess.property);\r\n        columns[colLess.property] = _.defaults(colLess, columns[colLess.property]);\r\n        select.push(colMore.property);\r\n        columns[colMore.property] = _.defaults(colMore, columns[colMore.property]);\r\n\r\n        this.patch({\r\n          columns: columns,\r\n          select: select,\r\n        });\r\n      } else {\r\n        // todo [akamel] unset our properties only\r\n        // this.unset();\r\n      }\r\n    },\r\n    thClick: function (e, arg) {\r\n      if (_.has(arg.column, '$metadata') && arg.column.$metadata.enabled) {\r\n        var ret = 0;\r\n        var skip = this.get('column.skip');\r\n\r\n        // todo [akamel] is this logic solid?\r\n        switch (arg.property) {\r\n          case 'column.skip.less': {\r\n            ret = _.isNumber(skip) ? Math.max(skip - 1, 0) : 0;\r\n            break;\r\n          }\r\n          case 'column.skip.more': {\r\n            ret = _.isNumber(skip) ? skip + 1 : 0;\r\n            break;\r\n          }\r\n          default:\r\n        }\r\n\r\n        this.set({ 'column.skip': ret });\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/column-shifter.js\n **/","define([\r\n  'lib/underscore',\r\n  'component/grid/projection/base',\r\n], function (_, BaseProjection) {\r\n  'use strict';\r\n\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      'column.template': {},\r\n    },\r\n    name: 'column-template',\r\n    update: function (options) {\r\n      // todo [akamel] when calling a deep update; suppress onchange event based updates\r\n      // Model.__super__.update.call(this, options);\r\n\r\n      // TODO [imang]: columns: ideally we should not need to read from select.\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var model = this.src.data;\r\n        var colTemplate = this.get('column.template');\r\n        var columns = model.get('columns');\r\n        _.each(columns, function (item, property) {\r\n          var ret = _.clone(item);\r\n          var templateValue = colTemplate[property];\r\n\r\n          if (_.has(colTemplate, property)) {\r\n            ret.$html = _.isFunction(templateValue) ? templateValue(ret) : templateValue;\r\n          }\r\n\r\n          columns[property] = ret;\r\n        });\r\n\r\n        this.patch({ columns: columns });\r\n      } else {\r\n        // todo [akamel] unset our properties only\r\n        // this.unset();\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/column-template.js\n **/","/**\r\n *\r\n * Important!!!\r\n *\r\n * The initial check-in is for unblock the simple grid in advanced campaign creation and\r\n * may cause bugs if you try to use it with some more complex grid. Please DO NOT use this\r\n * projection until we update this and remove the comments here.\r\n *\r\n * todo [yucongj, wewei] add the model to maintail the input data.\r\n *\r\n */\r\n\r\ndefine([\r\n  'lib/underscore',\r\n  'lib/jquery',\r\n  'component/grid/projection/base',\r\n  'component/grid/layout/template/row.editable.string.jade',\r\n], function (_, jquery, BaseProjection, editableTemplate) {\r\n  'use strict';\r\n\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      'column.editable.string': {},\r\n    },\r\n    name: 'column-editable-string',\r\n    update: function (options) {\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var model = this.src.data;\r\n        var columnEditable = this.get('column.editable.string');\r\n        var value = _.map(model.get('value'), function (item) {\r\n          var ret = _.clone(item);\r\n\r\n          _.each(columnEditable, function (value, key) {\r\n            if (_.has(ret, key)) {\r\n              if (!_.isObject(ret[key])) {\r\n                var obj = new Object(ret[key]); //eslint-disable-line\r\n\r\n                if (_.isUndefined(ret[key])) {\r\n                  obj.$undefined = true;\r\n                }\r\n\r\n                if (_.isNull(ret[key])) {\r\n                  obj.$null = true;\r\n                }\r\n\r\n                ret[key] = obj;\r\n              }\r\n\r\n              var defaultValue = (ret[key].$undefined || ret[key].$null) ? value.defaultValue : ret[key];\r\n\r\n              ret[key].$html = editableTemplate({ defaultValue: defaultValue });\r\n            }\r\n          });\r\n\r\n          return ret;\r\n        });\r\n\r\n        this.patch({ value: value });\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/editable-string.js\n **/","var jade = require(\"D:\\\\src\\\\projection-grid\\\\node_modules\\\\jade\\\\lib\\\\runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (defaultValue) {\nbuf.push(\"<input type=\\\"text\\\"\" + (jade.attr(\"value\", defaultValue, true, true)) + \" style=\\\"width:100%\\\" class=\\\"grid-text-input\\\">\");}.call(this,\"defaultValue\" in locals_for_with?locals_for_with.defaultValue:typeof defaultValue!==\"undefined\"?defaultValue:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/row.editable.string.jade\n ** module id = 27\n ** module chunks = 0\n **/","define([\r\n  'lib/underscore',\r\n  'lib/jquery',\r\n  'component/grid/projection/base',\r\n  'component/grid/layout/template/editable.jade',\r\n  'component/popup-editor/index',\r\n  '../../less/editable.less',\r\n], function (_, $, BaseProjection, editableTemplate, prompt) {\r\n  'use strict';\r\n\r\n  function isReadonlyRow(item) {\r\n    return !item || (item.$metadata && _.contains([\r\n      'aggregate',\r\n      'segmentation',\r\n    ], item.$metadata.type));\r\n  }\r\n\r\n  return BaseProjection.extend({\r\n    defaults: {\r\n      'column.editable': [],\r\n    },\r\n    name: 'column-editable',\r\n    events: {\r\n      'layout:click:cell': 'tdClick',\r\n    },\r\n\r\n    beforeSet: function (local) {\r\n      var editable = function () {\r\n        return true;\r\n      };\r\n\r\n      if (_.has(local, 'column.editable')) {\r\n        let editableOptions = local['column.editable'];\r\n        let viewConfig = {};\r\n        let conditions = {};\r\n\r\n        if (_.isArray(editableOptions)) {\r\n          _.each(editableOptions, editableColumn => {\r\n            if (_.isString(editableColumn)) {\r\n              conditions[editableColumn] = editable;\r\n            } else if (_.isObject(editableColumn) && _.isString(editableColumn.name)) {\r\n              conditions[editableColumn.name] = _.isFunction(editableColumn.condition) ? editableColumn.condition : editable;\r\n            }\r\n            viewConfig[editableColumn] = null;\r\n          });\r\n        } else {\r\n          _.each(editableOptions, (options, columnName) => {\r\n            if (_.isFunction(options)) {\r\n              conditions[columnName] = editable;\r\n              viewConfig[columnName] = options;\r\n            }\r\n          });\r\n        }\r\n\r\n        this.viewConfig = viewConfig;\r\n        this.isEditable = function (key, item) {\r\n          return _.isFunction(conditions[key]) && conditions[key](item);\r\n        };\r\n      }\r\n    },\r\n\r\n    update: function (options) {\r\n      if (BaseProjection.prototype.update.call(this, options)) {\r\n        var model = this.src.data;\r\n        var columns = model.get('columns');\r\n        var iconClasses = this.get('editable.icon.class') || ['glyphicon', 'glyphicon-pencil'];\r\n\r\n        _.each(this.viewConfig, function (view, key) {\r\n          var column = columns[key] || { property: key };\r\n          var $metadata = column.$metadata = column.$metadata || {};\r\n          var attrBody = $metadata['attr.body'] = $metadata['attr.body'] || {};\r\n          var className = attrBody.class || [];\r\n\r\n          if (_.isString(className)) {\r\n            className = className.split(/\\s+/);\r\n          }\r\n          attrBody.class = _.union(className, ['grid-editable-cell']);\r\n\r\n          columns[key] = column;\r\n        });\r\n\r\n        var value = _.map(model.get('value'), function (item) {\r\n          return isReadonlyRow(item) ? item : _.mapObject(item, function (value, key) {\r\n            if (this.isEditable(key, item)) {\r\n              if (!_.isObject(value)) {\r\n                value = new Object(value); // eslint-disable-line\r\n              }\r\n\r\n              value.$html = editableTemplate({\r\n                $html: value.$html || String(value),\r\n                classes: iconClasses,\r\n              });\r\n            }\r\n            return value;\r\n          }, this);\r\n        }, this);\r\n\r\n        this.patch({ value: value });\r\n      }\r\n    },\r\n\r\n    tdClick: function (e, arg) {\r\n      var schema = null;\r\n      var metadata = arg.column.$metadata;\r\n      // TODO: wewei\r\n      // let's rethink this\r\n      var property = (metadata && metadata.map) || arg.property;\r\n\r\n      if (!isReadonlyRow(arg.model) &&\r\n        this.isEditable(arg.property, arg.model) &&\r\n        e.target.tagName !== 'A' &&\r\n        $(e.target).closest('.is-not-trigger').length === 0) {\r\n        schema = arg.grid.options.get('schema');\r\n        let editor = this.viewConfig[property] || prompt;\r\n        editor({\r\n          model: arg.model,\r\n          schema: schema,\r\n          position: $(e.target).closest('td').position(),\r\n          property: property,\r\n          onSubmit: model => {\r\n            this.trigger('edit', model);\r\n          },\r\n        });\r\n      }\r\n    },\r\n  });\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/editable.js\n **/","var jade = require(\"D:\\\\src\\\\projection-grid\\\\node_modules\\\\jade\\\\lib\\\\runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function ($html, classes) {\nbuf.push(\"<div title=\\\"Edit\\\"\" + (jade.cls(['grid-edit-icon',classes], [null,true])) + \"></div>\" + (null == (jade_interp = $html) ? \"\" : jade_interp));}.call(this,\"$html\" in locals_for_with?locals_for_with.$html:typeof $html!==\"undefined\"?$html:undefined,\"classes\" in locals_for_with?locals_for_with.classes:typeof classes!==\"undefined\"?classes:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/editable.jade\n ** module id = 29\n ** module chunks = 0\n **/","define([\r\n  'jquery',\r\n  'bluebird',\r\n  'backbone',\r\n  './index.jade',\r\n], function ($, Promise, Backbone, template) {\r\n  var PopupEditor = Backbone.View.extend({\r\n    events: {\r\n      'click .save': function () {\r\n        this.trigger('save', this.model);\r\n      },\r\n      'click .cancel': function () {\r\n        this.trigger('cancel');\r\n      },\r\n      'change .editor': function (e) {\r\n        this.model = e.target.model;\r\n      },\r\n      'click form': function (e) {\r\n        e.stopPropagation();\r\n      },\r\n    },\r\n\r\n    initialize: function (options) {\r\n      this.position = options.position;\r\n      this.model = options.model;\r\n      this.property = options.property;\r\n    },\r\n\r\n    render: function () {\r\n      this.$el.html(template({ value: this.model[this.property] }));\r\n      this.$el.css({\r\n        position: 'absolute',\r\n        left: this.position.left,\r\n        top: this.position.top,\r\n      });\r\n\r\n      this.dismiss = function () {\r\n        this.trigger('cancel');\r\n      }.bind(this);\r\n\r\n      window.setTimeout(() => {\r\n        $(window).on('click', this.dismiss);\r\n      }, 0);\r\n\r\n      return this;\r\n    },\r\n\r\n    remove: function () {\r\n      $(window).off('click', this.dismiss);\r\n      Backbone.View.prototype.remove.apply(this, arguments);\r\n    },\r\n\r\n  });\r\n\r\n  return function (options) {\r\n    var editor = new PopupEditor(options);\r\n\r\n    document.body.appendChild(editor.render().el);\r\n\r\n    editor.on('save', function (model) {\r\n      editor.remove();\r\n      options.onSubmit && options.onSubmit(model);\r\n    });\r\n\r\n    editor.on('cancel', function () {\r\n      editor.remove();\r\n      options.onCancel && options.onCancel();\r\n    });\r\n  };\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/popup-editor/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_31__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bluebird\"\n ** module id = 31\n ** module chunks = 0\n **/","var jade = require(\"D:\\\\src\\\\projection-grid\\\\node_modules\\\\jade\\\\lib\\\\runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (value) {\nbuf.push(\"<form style=\\\"padding: 5px; background: #e0e0e0\\\" class=\\\"form-inline\\\"><input type=\\\"text\\\"\" + (jade.attr(\"value\", value, true, true)) + \" class=\\\"form-control editor\\\">&nbsp<button type=\\\"button\\\" class=\\\"btn btn-primary save\\\">Save</button>&nbsp<button type=\\\"button\\\" class=\\\"btn btn-default cancel\\\">Cancel</button></form>\");}.call(this,\"value\" in locals_for_with?locals_for_with.value:typeof value!==\"undefined\"?value:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/popup-editor/index.jade\n ** module id = 32\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./editable.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./editable.less\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./editable.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./less/editable.less\n ** module id = 33\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".grid-editable-cell {\\n  position: relative;\\n}\\n.grid-editable-cell .grid-edit-icon {\\n  display: none;\\n  position: absolute;\\n  top: 2px;\\n  right: 2px;\\n  font-size: 10px;\\n}\\n.grid-editable-cell:hover .grid-edit-icon {\\n  display: block;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/less-loader!./less/editable.less\n ** module id = 34\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 35\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 36\n ** module chunks = 0\n **/","define([\r\n  'bluebird',\r\n  'lib/underscore',\r\n  'component/grid/projection/base',\r\n  'component/grid/schema/properties.js',\r\n], function (Promise, _, BaseProjection, schemaProperties) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      'jsdata.query': undefined,\r\n      'jsdata.entity': undefined,\r\n      'jsdata.options': undefined,\r\n      'skip': undefined,\r\n      'take': undefined,\r\n      'filter': undefined,\r\n      'orderby': [],\r\n      'select': [],\r\n    },\r\n    name: 'jsdata',\r\n\r\n    update: function () {\r\n      var entity = this.get('jsdata.entity');\r\n      var options = _.defaults(this.get('jsdata.options'), { all: true });\r\n      var op = {};\r\n\r\n      this.p$fetchData || this.trigger('update:beginning');\r\n\r\n      var take = this.get('take');\r\n\r\n      if (take) {\r\n        op.limit = take;\r\n      }\r\n\r\n      var skip = this.get('skip');\r\n\r\n      if (skip) {\r\n        op.offset = skip;\r\n      }\r\n\r\n      var filter = this.get('filter');\r\n\r\n      if (filter) {\r\n        op.where = filter;\r\n      }\r\n\r\n      var query = this.get('jsdata.query');\r\n\r\n      if (query) {\r\n        op.query = query;\r\n      }\r\n\r\n      var orderby = this.get('orderby');\r\n\r\n      if (orderby && orderby.length) {\r\n        op.orderBy = _.reduce(orderby, function (arr, obj) {\r\n          _.each(obj, function (value, key) {\r\n            arr.push([key, value > 0 ? 'ASC' : 'DESC']);\r\n          });\r\n          return arr;\r\n        }, []);\r\n      }\r\n\r\n      var p$fetchData = this.p$fetchData = entity.findAll(op, options)\r\n        .then(function (data) {\r\n          if (this.p$fetchData === p$fetchData) {\r\n            var delta = {\r\n              value: data,\r\n              count: data.totalCount,\r\n              select: schemaProperties.from(data),\r\n            };\r\n            if (_.has(data, 'raw')) {\r\n              delta.rawValue = data.raw;\r\n            }\r\n            this.patch(delta);\r\n          }\r\n        }.bind(this))\r\n        .catch(function (jqXHR, textStatus, errorThrown) {\r\n          if (this.p$fetchData === p$fetchData) {\r\n            this.patch({\r\n              error: errorThrown,\r\n            });\r\n          }\r\n        }.bind(this))\r\n        .finally(function () {\r\n          if (this.p$fetchData === p$fetchData) {\r\n            this.trigger('update:finished');\r\n            this.p$fetchData = null;\r\n          }\r\n        }.bind(this));\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/jsdata.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n  'component/grid/schema/properties',\r\n  'component/grid/model/response',\r\n], function (_, Backbone, BaseProjection, schemaProperties /* , Response */) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      // todo [akamel] consider supporting a select on this level?\r\n      map: _.identity,\r\n    },\r\n    name: 'map',\r\n    update: function (options) {\r\n      // Model.__super__.update.call(this, options);\r\n\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var model = this.src.data;\r\n        var map = this.get('map');\r\n        var value = _.isFunction(map) ? _.map(model.get('value'), map) : model.get('value');\r\n\r\n        value = _.flatten(value);\r\n\r\n        this.patch({\r\n          value: value,\r\n          select: _.without(schemaProperties.from(value), '$metadata'),\r\n        });\r\n      } else {\r\n        // todo [akamel] unset our properties only\r\n        // this.unset();\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/map.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n  'component/grid/schema/properties',\r\n  'component/grid/model/response',\r\n], function (_, Backbone, BaseProjection, schemaProperties /* , Response */) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      'skip': 0,\r\n      'take': Number.MAX_VALUE,\r\n      'filter': function () {\r\n        return true;\r\n      },\r\n      'orderby': [],\r\n      'select': [],\r\n      'column.sortable': {},\r\n    },\r\n    name: 'map-queryable',\r\n    beforeSet: function (local) {\r\n      if (_.has(local, 'filter')) {\r\n        if (!_.isFunction(local.filter)) {\r\n          local.filter = this.defaults.filter;\r\n        }\r\n      }\r\n    },\r\n    update: function (options) {\r\n      // Model.__super__.update.call(this, options);\r\n\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var model = this.src.data;\r\n        var order = _.chain(this.get('orderby')).first().pairs().first().value();\r\n\r\n        var orderKey = _.first(order);\r\n        var orderDir = _.last(order);\r\n\r\n        var value = _.chain(model.get('value')).filter(this.get('filter'));\r\n        var sortFunc = this.get('column.sortable')[orderKey];\r\n\r\n        if (orderKey) {\r\n          if (_.isFunction(sortFunc)) {\r\n            value = _.chain(sortFunc(value.value(), orderDir));\r\n          } else {\r\n            value = value.sortBy(orderKey);\r\n            if (orderDir === -1) {\r\n              value = value.reverse();\r\n            }\r\n          }\r\n        }\r\n\r\n        value = value\r\n          .rest(this.get('skip'))\r\n          .first(this.get('take'))\r\n          .value();\r\n\r\n        var select = this.get('select');\r\n        if (!_.size(select)) {\r\n          select = schemaProperties.from(value);\r\n        }\r\n\r\n        this.patch({\r\n          value: value,\r\n          select: select,\r\n        });\r\n      } else {\r\n        // todo [akamel] unset our properties only\r\n        // this.unset();\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/memory-queryable.js\n **/","define(['component/grid/projection/base'], function (BaseProjection) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      seed: [],\r\n    },\r\n    update: function () {\r\n      this.trigger('update:beginning');\r\n\r\n      var value = this.get('seed');\r\n\r\n      this.data.set({\r\n        value: value,\r\n        count: value.length,\r\n      });\r\n\r\n      this.trigger('update:finished');\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/memory.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n], function (_, Backbone, BaseProjection) {\r\n  var wrds = ['troubles', 'kahlua', 'poncho', 'suzie', 'baheyya'];\r\n  var idx = 0;\r\n\r\n  function randomRow() {\r\n    var wrd1 = wrds[_.random(0, wrds.length - 1)];\r\n    var wrd2 = wrds[_.random(0, wrds.length - 1)];\r\n\r\n    return {\r\n      index: idx++,\r\n      name: wrd1 + ' ' + wrd2,\r\n      age: _.random(0, 22),\r\n    };\r\n  }\r\n\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      n: 5000,\r\n    },\r\n    name: 'mock',\r\n    update: function () {\r\n      this.trigger('update:beginning');\r\n      var value = [];\r\n\r\n      _(this.get('n')).times(function () {\r\n        value.push(randomRow());\r\n      });\r\n\r\n      this.data.set({\r\n        value: value,\r\n        count: value.length,\r\n      });\r\n      this.trigger('update:finished');\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/mock.js\n **/","define([\r\n  'bluebird',\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'lib/jquery',\r\n  'component/grid/projection/base',\r\n  'component/grid/projection/mock',\r\n  'component/grid/schema/properties',\r\n], function (Promise, _, Backbone, $, BaseProjection, MemoryMock, schemaProperties) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      verb: 'get',\r\n      url: undefined,\r\n      skip: undefined,\r\n      take: undefined,\r\n      filter: undefined,\r\n      orderby: [],\r\n      select: [],\r\n    },\r\n    name: 'odata',\r\n    update: function () {\r\n      this.p$fetchData || this.trigger('update:beginning');\r\n\r\n      var url = this.get('url');\r\n\r\n      url = _.isFunction(url) ? url() : url;\r\n      var op = {\r\n        url: url,\r\n        $format: 'json',\r\n      // todo [akamel] this is odata v3 specific\r\n        $count: true,\r\n      };\r\n\r\n      var take = this.get('take');\r\n      if (take) {\r\n        op.$top = take;\r\n      }\r\n\r\n      var skip = this.get('skip');\r\n      if (skip) {\r\n        op.$skip = skip;\r\n      }\r\n\r\n      // todo [akamel] only supports one order column\r\n      var orderby = this.get('orderby');\r\n      if (_.size(orderby)) {\r\n        var col = _.first(orderby);\r\n        var key = _.keys(col)[0];\r\n        var dir = col[key];\r\n\r\n        op.$orderby = key + ' ' + (dir > 0 ? 'asc' : 'desc');\r\n      }\r\n\r\n      var p$fetchData = this.p$fetchData = new Promise(function (resolve, reject) {\r\n        $.getJSON(op.url, _.omit(op, 'url'))\r\n          .success(resolve)\r\n          .error(function (jqXHR, textStatus, errorThrown) {\r\n            reject(errorThrown);\r\n          });\r\n      }).then(function (data) {\r\n        if (p$fetchData === this.p$fetchData) {\r\n          var delta = {\r\n            value: data.value,\r\n            rawValue: data,\r\n            select: schemaProperties.from(data.value),\r\n            count: data['@odata.count'],\r\n            error: undefined,\r\n          };\r\n          this.patch(delta);\r\n        }\r\n      }.bind(this)).catch(function (error) {\r\n        if (p$fetchData === this.p$fetchData) {\r\n          this.patch({ error: error });\r\n        }\r\n      }).finally(function () {\r\n        if (p$fetchData === this.p$fetchData) {\r\n          this.trigger('update:finished');\r\n          this.p$fetchData = null;\r\n        }\r\n      }.bind(this));\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/odata.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n  'component/grid/schema/properties',\r\n  'component/grid/model/response',\r\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      'page.size': 20,\r\n      'page.number': 0, // zero based\r\n    },\r\n    name: 'page',\r\n    // todo [akamel] what if we piped after the data was set?\r\n    beforeSet: function (local, other) {\r\n      var size = _.has(local, 'page.size') ? local['page.size'] : this.get('page.size');\r\n      var number = _.has(local, 'page.number') ? local['page.number'] : this.get('page.number');\r\n\r\n      // todo [akamel] sanetize size and number here\r\n      size = Math.max(size, 0);\r\n      number = Math.max(number, 0);\r\n\r\n      _.extend(other, {\r\n        take: size,\r\n        skip: size * number,\r\n      });\r\n    },\r\n    update: function (options) {\r\n      var model = this.src.data;\r\n      var size = Math.max(this.get('page.size'), 0);\r\n      var count = Math.max(0, model.get('count'));\r\n\r\n      options = options || {};\r\n\r\n      if (options.deep) {\r\n        if (this.src) {\r\n          var number = Math.max(this.get('page.number'), 0);\r\n\r\n          this.src.set({\r\n            take: size,\r\n            skip: size * number,\r\n          }, { silent: true });\r\n        }\r\n      }\r\n\r\n      // Model.__super__.update.call(this, options);\r\n\r\n      // if we came in with an update:deep\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var pageCount = Math.ceil(count / size);\r\n\r\n        this.patch({ 'page.count': pageCount });\r\n      } else {\r\n        // todo [akamel] unset our properties only\r\n        // this.unset();\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/page.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n  'component/grid/schema/properties',\r\n  'component/grid/model/response',\r\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      'property.template': {},\r\n    },\r\n    name: 'property-template',\r\n    update: function (options) {\r\n      // Model.__super__.update.call(this, options);\r\n\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var model = this.src.data;\r\n        var opt = this.get('property.template');\r\n        var value = _.map(model.get('value'), function (item) {\r\n          var ret = _.clone(item);\r\n\r\n          _.each(opt, function (value, key) {\r\n            if (_.has(ret, key)) {\r\n              var res = value({\r\n                model: item,\r\n                property: key,\r\n              });\r\n\r\n              if (!_.isObject(ret[key])) {\r\n                var obj = new Object(ret[key]); // eslint-disable-line\r\n\r\n                if (_.isUndefined(ret[key])) {\r\n                  obj.$undefined = true;\r\n                }\r\n\r\n                if (_.isNull(ret[key])) {\r\n                  obj.$null = true;\r\n                }\r\n\r\n                ret[key] = obj;\r\n              }\r\n\r\n              ret[key].$html = res;\r\n            }\r\n          });\r\n\r\n          return ret;\r\n        });\r\n\r\n        this.patch({ value: value });\r\n      } else {\r\n        // todo [akamel] unset our properties only\r\n        // this.unset();\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/property-template.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n  'component/grid/layout/template/selectable.jade',\r\n], function (_, Backbone, BaseProjection, selectableTemplate) {\r\n  'use strict';\r\n\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      'column.checked': 'checkbox',   // the checkbox column\r\n      'row.check.id': 'Id',\r\n      'row.check.list': [],\r\n      'row.check.checked.all': false, // used to store user's check value for the special case no rows or all rows is disabled\r\n      'row.check.single': false,\r\n      'row.check.allow': function () {\r\n        return true;\r\n      },\r\n    },\r\n    name: 'row-check',\r\n    events: {\r\n      'layout:click:cell': 'tdClick',\r\n      'layout:click:header': 'thClick',\r\n    },\r\n    reset: function () {\r\n      this.set({\r\n        'row.check.checked.all': false,\r\n        'row.check.list': [],\r\n      });\r\n    },\r\n    update: function (options) {\r\n      // Model.__super__.update.call(this, options);\r\n\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var checkId = this.get('row.check.id');\r\n        var value = this.src.data.get('value');\r\n        var ids = _.pluck(value, checkId);\r\n        var checked = _.intersection(this.get('row.check.list'), ids);\r\n        var checkedLookup = _.object(checked, []);\r\n        var col = this.get('column.checked');\r\n        var columns = _.clone(this.src.data.get('columns'));\r\n        var checkedAll = value.length > 0;\r\n        var hasCheckboxable = false;\r\n        var checkboxAllow = this.get('row.check.allow');\r\n        var checkboxColumn = _.find(columns, function (item) {\r\n          return item.property === col;\r\n        });\r\n        var isSingle = this.get('row.check.single');\r\n\r\n        this.set('row.check.list', checked, { silent: true });\r\n\r\n        // todo [akamel] it is not clear how 'hasCheckboxable' is used\r\n        value = _.map(value, function (item) {\r\n          var ret = _.clone(item);\r\n          var checked = false;\r\n          var disabled = true;\r\n          var isAllowed = _.isFunction(checkboxAllow) ? checkboxAllow(ret) : checkboxAllow;\r\n\r\n          if (isAllowed) {\r\n            checked = _.has(checkedLookup, ret[checkId]);\r\n            checkedAll = checkedAll && checked;\r\n            disabled = false;\r\n            hasCheckboxable = true;\r\n\r\n            ret[col] = _.extend({}, ret[col], {\r\n              $html: selectableTemplate({\r\n                type: isSingle ? 'radio' : 'checkbox',\r\n                checked: checked,\r\n                disabled: disabled,\r\n              }),\r\n            });\r\n          }\r\n\r\n          return ret;\r\n        });\r\n\r\n        // set the checkbox in th\r\n        if (!_.isUndefined(checkboxColumn)) {\r\n          if (isSingle) {\r\n            checkboxColumn.$html = '<span/>';\r\n          } else {\r\n            var disabled = _.size(ids) === 0;\r\n            if (hasCheckboxable) {\r\n              checkboxColumn.$html = selectableTemplate({\r\n                type: 'checkbox',\r\n                checked: checkedAll,\r\n                disabled: disabled,\r\n              });\r\n              if (!checkedAll) {\r\n                this.attributes['row.check.checked.all'] = false;\r\n              }\r\n            } else {\r\n              checkboxColumn.$html = selectableTemplate({\r\n                type: 'checkbox',\r\n                checked: this.get('row.check.checked.all'),\r\n                disabled: disabled,\r\n              });\r\n            }\r\n          }\r\n        }\r\n\r\n        this.patch({\r\n          value: value,\r\n          columns: columns,\r\n        });\r\n      } else {\r\n        // todo [akamel] unset our properties only\r\n        // this.unset();\r\n      }\r\n    },\r\n    tdClick: function (e, arg) {\r\n      var checkboxProperty = this.get('column.checked');\r\n      var isSingle = this.get('row.check.single');\r\n\r\n      if (arg.property === checkboxProperty) {\r\n        var list = this.get('row.check.list');\r\n        var id = arg.model[this.get('row.check.id')];\r\n\r\n        if (isSingle) {\r\n          this.set({ 'row.check.list': [id] });\r\n        } else {\r\n          this.set({\r\n            'row.check.list': arg.checked ? list.concat([id]) : _.without(list, id),\r\n          });\r\n        }\r\n\r\n        this.update();\r\n      }\r\n    },\r\n    thClick: function (e, arg) {\r\n      var checkboxProperty = this.get('column.checked');\r\n\r\n      if (arg.property === checkboxProperty) {\r\n        var list = [];\r\n\r\n        if (arg.checked) {\r\n          var checkId = this.get('row.check.id');\r\n          // TODO [akamel] this concept of check allow is strange\r\n          var checkboxAllow = this.get('row.check.allow');\r\n\r\n          // get the list of allowed rows' id\r\n          list = _.chain(this.data.get('value'))\r\n            .filter(function (item) {\r\n              return (_.isFunction(checkboxAllow) ? checkboxAllow(item) : checkboxAllow) && !_.isUndefined(item[checkId]);\r\n            })\r\n            .map(function (item) {\r\n              return item[checkId];\r\n            })\r\n            .value();\r\n        }\r\n\r\n        this.set({\r\n          'row.check.list': list,\r\n          'row.check.checked.all': arg.checked,\r\n        });\r\n\r\n        this.update();\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/row-checkbox.js\n **/","var jade = require(\"D:\\\\src\\\\projection-grid\\\\node_modules\\\\jade\\\\lib\\\\runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (checked, disabled, type) {\nbuf.push(\"<input\" + (jade.attr(\"type\", type, true, true)) + (jade.attr(\"checked\", checked, true, true)) + (jade.attr(\"disabled\", disabled, true, true)) + \" class=\\\"column-selection\\\">\");}.call(this,\"checked\" in locals_for_with?locals_for_with.checked:typeof checked!==\"undefined\"?checked:undefined,\"disabled\" in locals_for_with?locals_for_with.disabled:typeof disabled!==\"undefined\"?disabled:undefined,\"type\" in locals_for_with?locals_for_with.type:typeof type!==\"undefined\"?type:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/selectable.jade\n ** module id = 46\n ** module chunks = 0\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n  'component/grid/layout/template/row.tri-state-checked.jade',\r\n], function (_, Backbone, BaseProjection, defaultRowCheckTemp) {\r\n  'use strict';\r\n\r\n  var CheckTransitionRule = {};\r\n\r\n  // CheckTransitionRule functions determine the state transition of a checkbox.\r\n  // State transition depends on the current state and wheather a short or full cycle is requested.\r\n  // When the short  cycle is requested the checkbox cannot return to the indeterminate state,\r\n  // event if it started in this state.\r\n  // Two directions of transition are available:\r\n  // ... -> indeterminate -> checked -> unchecked -> ...\r\n  // ... -> indeterminate -> unchecked -> checked -> ...\r\n  CheckTransitionRule.indeterminateToChecked = (function () {\r\n    var nextState = {\r\n      unchecked: function (shortCycle) {\r\n        return shortCycle ? 'checked' : 'indeterminate';\r\n      },\r\n      checked: _.constant('unchecked'),\r\n      indeterminate: _.constant('checked'),\r\n    };\r\n\r\n    return function (shortCycle, currentState) {\r\n      return _.has(nextState, currentState) && nextState[currentState](shortCycle) || 'unchecked';\r\n    };\r\n  })();\r\n\r\n  CheckTransitionRule.indeterminateToUnchecked = (function () {\r\n    var nextState = {\r\n      unchecked: _.constant('checked'),\r\n      checked: function (shortCycle) {\r\n        return shortCycle ? 'unchecked' : 'indeterminate';\r\n      },\r\n      indeterminate: _.constant('unchecked'),\r\n    };\r\n\r\n    return function (shortCycle, currentState) {\r\n      return _.has(nextState, currentState) && nextState[currentState](shortCycle) || 'unchecked';\r\n    };\r\n  })();\r\n\r\n  CheckTransitionRule.indeterminateToCheckedFullCycle = function (currentState) {\r\n    return CheckTransitionRule.indeterminateToChecked(false, currentState);\r\n  };\r\n\r\n  CheckTransitionRule.indeterminateToUncheckedFullCycle = function (currentState) {\r\n    return CheckTransitionRule.indeterminateToUnchecked(false, currentState);\r\n  };\r\n\r\n  CheckTransitionRule.indeterminateToCheckedShortCycle = function (currentState) {\r\n    return CheckTransitionRule.indeterminateToChecked(true, currentState);\r\n  };\r\n\r\n  CheckTransitionRule.indeterminateToUncheckedShortCycle = function (currentState) {\r\n    return CheckTransitionRule.indeterminateToUnchecked(true, currentState);\r\n  };\r\n\r\n  function getAllCheckState(checkStateCounters, count) {\r\n    return _.findKey(checkStateCounters, function (c) {\r\n      return c === count;\r\n    }) || 'unchecked';\r\n  }\r\n\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      'column.checked': 'checkbox',  // the checkbox column\r\n      'row.check.id': 'Id',\r\n      'row.check.map': {},\r\n      'row.check.all': { state: 'unchecked' },    // used to store user's check value for the special case no rows or all rows is disabled\r\n      'row.check.allow': function () {\r\n        return true;\r\n      },\r\n      'row.check.click-anywhere': false,\r\n      'row.check.transition': CheckTransitionRule.indeterminateToCheckedShortCycle,\r\n      'row.check.all.transition': CheckTransitionRule.indeterminateToCheckedShortCycle,\r\n      'row.check.template': defaultRowCheckTemp,\r\n    },\r\n    name: 'row-check',\r\n    events: {\r\n      'layout:click:cell': 'tdClick',\r\n      'layout:click:header': 'thClick',\r\n    },\r\n    reset: function () {\r\n      this.set({\r\n        'row.check.checked.all': false,\r\n        'row.check.map': {},\r\n      });\r\n    },\r\n    update: function (options) {\r\n      if (!Model.__super__.update.call(this, options)) {\r\n        return;\r\n      }\r\n\r\n      var checkId = this.get('row.check.id');\r\n      var ids = _.pluck(this.src.data.get('value'), checkId);\r\n      var checkMap = this.get('row.check.map');\r\n      var col = this.get('column.checked');\r\n      var columns = _.clone(this.src.data.get('columns'));\r\n      var checkStateCounters = _.object(\r\n          ['unchecked', 'checked', 'indeterminate'],\r\n          [0, 0, 0]\r\n        );\r\n      var hasCheckboxable = false;\r\n      var checkboxAllow = this.get('row.check.allow');\r\n      var checkboxColumn = _.find(columns, function (item) {\r\n        return item.property === col;\r\n      });\r\n      var rowCheckTemp = this.get('row.check.template');\r\n\r\n      var value = _.map(this.src.data.get('value'), function (item) {\r\n        var ret = _.clone(item);\r\n        var check = checkMap[ret[checkId]] || { state: 'unchecked' };\r\n        var disabled = true;\r\n        var isAllowed = _.isFunction(checkboxAllow) ? checkboxAllow(ret) : checkboxAllow;\r\n\r\n        checkStateCounters[check.state]++;\r\n\r\n        if (isAllowed) {\r\n          disabled = false;\r\n          hasCheckboxable = true;\r\n        }\r\n\r\n        ret[col] = _.extend({}, ret[col], {\r\n          $html: rowCheckTemp({ checkState: check.state, disabled: disabled }),\r\n        });\r\n\r\n        return ret;\r\n      });\r\n\r\n      // set the checkbox in th\r\n      if (!_.isUndefined(checkboxColumn)) {\r\n        var disabledAllCheck = _.size(ids) === 0;\r\n\r\n        if (hasCheckboxable) {\r\n          var checkState = getAllCheckState(checkStateCounters, ids.length);\r\n\r\n          checkboxColumn.$html = rowCheckTemp({ checkState: checkState, disabled: disabledAllCheck });\r\n          this.attributes['row.check.all'] = _.extend(this.attributes['row.check.all'], { state: checkState });\r\n        } else {\r\n          checkboxColumn.$html = rowCheckTemp({ checkState: this.get('row.check.all').state, disabled: disabledAllCheck });\r\n        }\r\n      }\r\n\r\n      this.patch({\r\n        value: value,\r\n        columns: columns,\r\n      });\r\n    },\r\n    tdClick: function (e, arg) {\r\n      var checkboxProperty = this.get('column.checked');\r\n      var clickAnywhere = this.get('row.check.click-anywhere');\r\n\r\n      if (arg.property === checkboxProperty || clickAnywhere) {\r\n        var checkMap = _.clone(this.get('row.check.map'));\r\n        var id = arg.model[this.get('row.check.id')];\r\n        var defaultTransition = this.get('row.check.transition');\r\n        var check = _.extend({\r\n          id: id,\r\n          transition: defaultTransition,\r\n          state: 'unchecked',\r\n        }, checkMap[id]);\r\n\r\n        check.state = check.transition(check.state);\r\n        checkMap[id] = check;\r\n\r\n        this.set({\r\n          'row.check.map': checkMap,\r\n        });\r\n\r\n        e.stopImmediatePropagation();\r\n      }\r\n    },\r\n    thClick: function (e, arg) {\r\n      var checkboxProperty = this.get('column.checked');\r\n\r\n      if (arg.property === checkboxProperty) {\r\n        var checkMap = _.clone(this.get('row.check.map'));\r\n        var checkId = this.get('row.check.id');\r\n        var allCheck = this.get('row.check.all');\r\n        var checkState = allCheck.state;\r\n        var allCheckTransitionRule = this.get('row.check.all.transition');\r\n        var CheckTransitionRule = this.get('row.check.transition');\r\n\r\n        allCheck.state = allCheckTransitionRule(checkState);\r\n\r\n        checkMap = _.object(\r\n          this.data.get('value')\r\n          .map(function (item) {\r\n            var id = item[checkId];\r\n            var check = _.extend({\r\n              id: id,\r\n              transition: CheckTransitionRule,\r\n            }, checkMap[id], { state: allCheck.state });\r\n\r\n            return [id, check];\r\n          })\r\n        );\r\n\r\n        this.set({\r\n          'row.check.map': checkMap,\r\n          'row.check.all': allCheck,\r\n        });\r\n\r\n        e.stopImmediatePropagation();\r\n      }\r\n    },\r\n  });\r\n\r\n  function CheckDiff(added, changed, removed, unchanged) {\r\n    this.added = added || {};\r\n    this.changed = changed || {};\r\n    this.removed = removed || {};\r\n    this.unchanged = unchanged || {};\r\n  }\r\n\r\n  CheckDiff.prototype.hasChanges = function () {\r\n    return _.keys(this.changed).length + _.keys(this.added).length > 0;\r\n  };\r\n\r\n  function diffCheckMap(before, after, defaultState) {\r\n    defaultState = defaultState || { state: 'unchecked' };\r\n\r\n    var checkDiff = new CheckDiff();\r\n\r\n    _.keys(before).forEach(function (key) {\r\n      var beforeState = before[key];\r\n      var afterState = after[key];\r\n\r\n      if (!afterState) {\r\n        checkDiff.removed[key] = beforeState;\r\n      } else if (beforeState.state === afterState.state) {\r\n        checkDiff.unchanged[key] = afterState;\r\n      } else {\r\n        checkDiff.changed[key] = { before: beforeState, after: afterState };\r\n      }\r\n    });\r\n\r\n    _.keys(after).forEach(function (key) {\r\n      var afterState = after[key];\r\n      var beforeState = before[key];\r\n\r\n      if (!beforeState && defaultState.state !== afterState.state) {\r\n        checkDiff.added[key] = afterState;\r\n      }\r\n    });\r\n\r\n    return checkDiff;\r\n  }\r\n\r\n  function statCheckMap(checkMap, defaultState) {\r\n    defaultState = defaultState || { state: 'unchecked' };\r\n    var checked = [];\r\n    var indeterminate = [];\r\n    var unchecked = [];\r\n\r\n    _.keys(checkMap).forEach(function (key) {\r\n      var check = checkMap[key];\r\n\r\n      if (check.state === 'checked' && check.state !== defaultState.state) {\r\n        checked.push(check);\r\n      } else if (check.state === 'unchecked' && check.state !== defaultState.state) {\r\n        unchecked.push(check);\r\n      } else if (check.state !== defaultState.state) {\r\n        indeterminate.push(check);\r\n      }\r\n    });\r\n\r\n    return {\r\n      checked: checked,\r\n      unchecked: unchecked,\r\n      indeterminate: indeterminate,\r\n    };\r\n  }\r\n\r\n  function fullStatCheckMap(before, after, defaultState) {\r\n    return _.extend(statCheckMap(after, defaultState), diffCheckMap(before, after, defaultState));\r\n  }\r\n\r\n  Model.CheckTransitionRule = CheckTransitionRule;\r\n  Model.fullStatCheckMap = fullStatCheckMap;\r\n  Model.statCheckMap = statCheckMap;\r\n  Model.diffCheckMap = diffCheckMap;\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/row-tri-state-checkbox.js\n **/","var jade = require(\"D:\\\\src\\\\projection-grid\\\\node_modules\\\\jade\\\\lib\\\\runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (checkState) {\nvar classes = [].concat(checkState === 'indeterminate' ? ['glyphicon', 'glyphicon-minus'] : checkState === 'checked' ? ['glyphicon', 'glyphicon-ok'] : [])\nbuf.push(\"<div class=\\\"column-tri-state-checkbox\\\"><span\" + (jade.cls([classes], [true])) + \"></span></div>\");}.call(this,\"checkState\" in locals_for_with?locals_for_with.checkState:typeof checkState!==\"undefined\"?checkState:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/row.tri-state-checked.jade\n ** module id = 48\n ** module chunks = 0\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n  'component/grid/schema/properties',\r\n  'component/grid/model/response',\r\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {},\r\n    name: 'row-index',\r\n    update: function (options) {\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var model = this.src.data;\r\n        var skip = this.get('skip');\r\n        var value = _.map(model.get('value'), function (i, idx) {\r\n          var ret = _.clone(i);\r\n          ret.rowIndex = idx + (_.isFinite(skip) ? skip : 0) + 1;\r\n          return ret;\r\n        });\r\n\r\n        this.patch({ value: value });\r\n      } else {\r\n        // todo [akamel] unset our properties only\r\n        // this.unset();\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/row-index.js\n **/","define([\r\n  'lib/underscore',\r\n  'component/grid/projection/base',\r\n  'component/grid/schema/properties',\r\n], function (_, BaseProjection, schemaProperties) {\r\n  var Model = BaseProjection.extend({\r\n\r\n    defaults: {\r\n      seed: null,\r\n    },\r\n\r\n    name: 'sink',\r\n\r\n    update: function () {\r\n      var value;\r\n\r\n      value = this.get('seed');\r\n\r\n      if (value) {\r\n        var select = schemaProperties.from(value);\r\n        this.patch({\r\n          value: value,\r\n          select: select,\r\n          count: _.size(value),\r\n        });\r\n      }\r\n    },\r\n\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/sink.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/projection/base',\r\n  'component/grid/model/response',\r\n], function (_, Backbone, BaseProjection) {\r\n  var Model = BaseProjection.extend({\r\n    defaults: {\r\n      'column.group': {},\r\n      'column.groupExpansion': [],\r\n      'column.select': null,\r\n    },\r\n    name: 'column-group',\r\n\r\n    events: {\r\n      'layout:click:header': 'onClickHeader',\r\n    },\r\n\r\n    update: function (options) {\r\n      if (Model.__super__.update.call(this, options)) {\r\n        var model = this.src.data;\r\n        var columnGroup = this.get('column.group') || {};\r\n        var groupExpansion = {};\r\n        _.each(this.get('column.groupExpansion') || [], function (columnName) {\r\n          groupExpansion[columnName] = true;\r\n        });\r\n        var select = this.get('column.select') || model.get('select');\r\n        var columns = model.get('columns');\r\n        var subSelect = [];\r\n        var isApplyGroup = false;\r\n\r\n        _.each(columnGroup, function (subColumns, name) {\r\n          if (!_.has(columns, name)) {\r\n            return;\r\n          }\r\n          isApplyGroup = true;\r\n          columns[name].group = subColumns;\r\n          // remove the columns that appear in the select\r\n          select = _.difference(select, subColumns);\r\n          columns[name].groupExpansion = _.has(groupExpansion, name);\r\n        }, this);\r\n        var selectExpand = select.slice(0);\r\n\r\n        _.each(select, function (columnName) {\r\n          var column = columns[columnName];\r\n          var subColumns = column.group;\r\n          if (column.groupExpansion) {\r\n            var nameIndex = selectExpand.indexOf(columnName);\r\n            selectExpand.splice.apply(selectExpand, [nameIndex, 1].concat(subColumns));\r\n            subSelect = subSelect.concat(subColumns);\r\n          }\r\n        }, this);\r\n\r\n        this.patch({\r\n          columns: columns,\r\n          select: select,\r\n          subSelect: subSelect,\r\n          selectExpand: selectExpand,\r\n          isApplyGroup: isApplyGroup,\r\n        });\r\n      } else {\r\n        // todo [akamel] unset our properties only\r\n        // this.unset();\r\n      }\r\n    },\r\n\r\n    onClickHeader: function (e, arg) {\r\n      if (!e.target.classList.contains('glyphicon')) {\r\n        return;\r\n      }\r\n      var column = arg.column;\r\n      if (_.isArray(column.group)) {\r\n        var groupExpansion = this.get('column.groupExpansion') || [];\r\n        if (column.groupExpansion) {\r\n          groupExpansion = _.without(groupExpansion, column.property);\r\n        } else {\r\n          groupExpansion = _.union(groupExpansion, [column.property]);\r\n        }\r\n        this.set({ 'column.groupExpansion': groupExpansion });\r\n      }\r\n    },\r\n  });\r\n\r\n  return Model;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/column-group.js\n **/","import BaseProjection from './base';\r\n\r\nconst ColumnsProjection = BaseProjection.extend({\r\n  defaults: {\r\n    columns: {},\r\n  },\r\n\r\n  name: 'columns',\r\n\r\n  update(options) {\r\n    if (BaseProjection.prototype.update.call(this, options)) {\r\n      this.patch({\r\n        columns: this.get('columns'),\r\n      });\r\n    }\r\n  },\r\n\r\n});\r\n\r\nexport default ColumnsProjection;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/columns.js\n **/","import _ from 'underscore';\r\n\r\nexport function delegateEvents({ from, to, events }) {\r\n  _.each(\r\n    events,\r\n    event => from.on(event, (...args) => to.trigger(event, ...args))\r\n  );\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/factory/utility.js\n **/","import _ from 'underscore';\r\nimport GridView from '../grid-view';\r\nimport layout from '../layout/index';\r\nimport { delegateEvents } from './utility';\r\n\r\nexport default definePlugin => definePlugin('gridView', [\r\n  'config',\r\n  'projection',\r\n  'renderers',\r\n], function (config, projection, renderers) {\r\n  const gridView = new GridView({\r\n    projection,\r\n    el: config.el,\r\n    container: _.chain(config)\r\n      .result('scrollable')\r\n      .result('fixedHeader')\r\n      .result('container')\r\n      .value(),\r\n    schema: config.dataSource.schema,\r\n    Layout: layout.TableLayout.partial({\r\n      renderers,\r\n      template: layout.templates.table,\r\n      hideHeaders: config.hideHeaders,\r\n    }),\r\n  });\r\n\r\n  delegateEvents({\r\n    from: projection,\r\n    to: gridView,\r\n    events: [\r\n      'update:beginning',\r\n      'update:finished',\r\n    ],\r\n  });\r\n\r\n  return gridView;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/factory/grid-view-plugin.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n  'component/grid/model/index',\r\n  'component/grid/windowContainer',\r\n  'component/grid/elementContainer',\r\n], function (_, Backbone, Options, WindowContainer, ElementContainer) {\r\n  var GridView = Backbone.View.extend({\r\n    // todo [akamel] document available options\r\n    initialize: function (options) {\r\n      options = options || {};\r\n\r\n      this.options = new Options(options);\r\n\r\n      var container = selectContainer(options.container);\r\n\r\n      // todo [akamel] assert that layout is a ctor\r\n      this.layout = new options.Layout({\r\n        el: this.el,\r\n        grid: this,\r\n        container: container,\r\n      });\r\n\r\n      this.projection = options.projection;\r\n\r\n      this.projection.data.on('change', function () {\r\n        this.trigger.apply(this, ['change:data'].concat(_.toArray(arguments)));\r\n      }.bind(this));\r\n\r\n      this.options.on('change', function () {\r\n        this.trigger.apply(this, ['change:options'].concat(_.toArray(arguments)));\r\n      }.bind(this));\r\n\r\n      this.projection.on('all', function () {\r\n        this.trigger.apply(this, ['data:' + _.first(arguments)].concat(_.rest(arguments)));\r\n      }.bind(this));\r\n\r\n      this.layout.on('all', function () {\r\n        var key = 'layout:' + _.first(arguments);\r\n        var arg = [key].concat(_.rest(arguments));\r\n\r\n        this.projection.bubble.apply(this.projection, arg);\r\n        this.trigger.apply(this, arg);\r\n      }.bind(this));\r\n\r\n      // todo [akamel] this is a temporary implementation of orderby; should be in layout not in grid\r\n      this.on('layout:click:header', function (e, arg) {\r\n        var column = arg.column;\r\n\r\n        if (column.sortable) {\r\n          var orderby = {};\r\n\r\n          var key = _.isString(column.sortable) ? column.sortable : column.property;\r\n\r\n          orderby[key] = column.$orderby ? column.$orderby.dir * -1 : 1;\r\n\r\n          this.projection.set({ 'orderby': [orderby], 'page.number': 0 });\r\n        }\r\n      }.bind(this));\r\n\r\n      var local = _.omit(options, 'projection', 'layout');\r\n      this.options.set(local);\r\n    },\r\n\r\n    remove: function () {\r\n      this.layout.remove();\r\n      Backbone.View.prototype.remove.apply(this, arguments);\r\n    },\r\n\r\n    set: function () {\r\n      this.options.set.apply(this.options, _.toArray(arguments));\r\n    },\r\n\r\n    render: function (options) {\r\n      options = options || {};\r\n\r\n      this.layout.render();\r\n\r\n      if (options.fetch) {\r\n        this.projection.update({ deep: true });\r\n      }\r\n\r\n      return this;\r\n    },\r\n\r\n    getSelection: function () {\r\n      return this.projection.get('row.check.list') || [];\r\n    },\r\n\r\n  });\r\n\r\n  function selectContainer(userContainer) {\r\n    if (userContainer && window !== userContainer && ElementContainer.isValidContainer(userContainer)) {\r\n      return new ElementContainer({ el: userContainer });\r\n    }\r\n\r\n    return new WindowContainer();\r\n  }\r\n\r\n  return GridView;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/grid-view.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/backbone',\r\n], function (_, Backbone) {\r\n  return Backbone.Model.extend({\r\n    defaults: {\r\n      layout: undefined,\r\n      projection: undefined,\r\n    },\r\n  });\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/model/index.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/jquery',\r\n  'component/grid/containerBase',\r\n], function (_, $, ContainerBase) {\r\n  var WindowContainer = ContainerBase.extend({\r\n    constructor: function (options) {\r\n      options = _.extend({}, options, { el: window });\r\n      ContainerBase.prototype.constructor.apply(this, [options].concat(_.rest(arguments)));\r\n    },\r\n\r\n    offset: function (element) {\r\n      return $(element).offset();\r\n    },\r\n  });\r\n\r\n  return WindowContainer;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/windowContainer.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/jquery',\r\n  'lib/backbone',\r\n], function (_, $, Backbone) {\r\n  var ContainerBase = Backbone.View.extend({\r\n    events: {\r\n      scroll: 'onScroll',\r\n      resize: 'onResize',\r\n    },\r\n\r\n    onScroll: function (e) {\r\n      this.trigger('scroll:container', e);\r\n    },\r\n\r\n    onResize: function (e) {\r\n      this.trigger('resize:container', e);\r\n    },\r\n\r\n    offset: function (/* element, scrollTop, scrollLeft */) {\r\n      throw new Error(\"Offset function not implemented\");\r\n    },\r\n  });\r\n\r\n  return ContainerBase;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/containerBase.js\n **/","define([\r\n  'lib/underscore',\r\n  'lib/jquery',\r\n  'component/grid/containerBase',\r\n], function (_, $, ContainerBase) {\r\n  var ElementContainer = ContainerBase.extend({\r\n    offset: function (element) {\r\n      var position = $(element).position();\r\n\r\n      return {\r\n        top: position.top + this.$el.scrollTop(),\r\n        left: position.left + this.$el.scrollLeft(),\r\n      };\r\n    },\r\n  });\r\n\r\n  ElementContainer.isValidContainer = function (userContainer) {\r\n    return ['absolute', 'relative', 'fixed'].indexOf($(userContainer).css('position')) >= 0;\r\n  };\r\n\r\n  return ElementContainer;\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/elementContainer.js\n **/"],"sourceRoot":""}